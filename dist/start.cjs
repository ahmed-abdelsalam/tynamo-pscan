"use strict";var $c=Object.create;var Lr=Object.defineProperty;var Uc=Object.getOwnPropertyDescriptor;var Lc=Object.getOwnPropertyNames;var Hc=Object.getPrototypeOf,zc=Object.prototype.hasOwnProperty;var d=(e,t)=>()=>(e&&(t=e(e=0)),t);var qc=(e,t)=>{for(var r in t)Lr(e,r,{get:t[r],enumerable:!0})},Gc=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Lc(t))!zc.call(e,n)&&n!==r&&Lr(e,n,{get:()=>t[n],enumerable:!(o=Uc(t,n))||o.enumerable});return e};var Hr=(e,t,r)=>(r=e!=null?$c(Hc(e)):{},Gc(t||!e||!e.__esModule?Lr(r,"default",{value:e,enumerable:!0}):r,e));var k,Xe=d(()=>{"use strict";k=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}});var S,Go=d(()=>{"use strict";Xe();S=class e extends k{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}}});var M,Bo=d(()=>{"use strict";Xe();M=class e extends k{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}}});var jo,Vo=d(()=>{"use strict";Xe();jo=(...e)=>async()=>{if(e.length===0)throw new k("No providers in chain");let t;for(let r of e)try{return await r()}catch(o){if(t=o,o!=null&&o.tryNextLink)continue;throw o}throw t}});var Wo,Yo=d(()=>{"use strict";Wo=e=>()=>Promise.resolve(e)});var Et,Ko=d(()=>{"use strict";Et=(e,t,r)=>{let o,n,s,i=!1,a=async()=>{n||(n=e());try{o=await n,s=!0,i=!1}finally{n=void 0}return o};return t===void 0?async c=>((!s||c!=null&&c.forceRefresh)&&(o=await a()),o):async c=>((!s||c!=null&&c.forceRefresh)&&(o=await a()),i?o:r&&!r(o)?(i=!0,o):(t(o)&&await a(),o))}});var v=d(()=>{"use strict";Go();Xe();Bo();Vo();Yo();Ko()});var Xo,Jo,zr,Bc,we,Je=d(()=>{"use strict";Xo=require("os"),Jo=require("path"),zr={},Bc=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",we=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:o=`C:${Jo.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${o}${r}`;let n=Bc();return zr[n]||(zr[n]=(0,Xo.homedir)()),zr[n]}});var jc,Vc,_e,Qo=d(()=>{"use strict";jc="AWS_PROFILE",Vc="default",_e=e=>e.profile||process.env[jc]||Vc});var Zo,en,xt,qr=d(()=>{"use strict";Zo=require("crypto"),en=require("path");Je();xt=e=>{let r=(0,Zo.createHash)("sha1").update(e).digest("hex");return(0,en.join)(we(),".aws","sso","cache",`${r}.json`)}});var tn,Wc,yt,rn=d(()=>{"use strict";tn=require("fs");qr();({readFile:Wc}=tn.promises),yt=async e=>{let t=xt(e),r=await Wc(t,"utf8");return JSON.parse(r)}});var on=d(()=>{"use strict"});var nn,sn=d(()=>{"use strict";(function(e){e.HEADER="header",e.QUERY="query"})(nn||(nn={}))});var Gr,an=d(()=>{"use strict";(function(e){e.HEADER="header",e.QUERY="query"})(Gr||(Gr={}))});var cn=d(()=>{"use strict"});var dn=d(()=>{"use strict"});var pn=d(()=>{"use strict"});var ln=d(()=>{"use strict"});var mn=d(()=>{"use strict";sn();an();cn();dn();pn();ln()});var un=d(()=>{"use strict"});var fn=d(()=>{"use strict"});var hn=d(()=>{"use strict"});var En=d(()=>{"use strict"});var xn=d(()=>{"use strict"});var yn=d(()=>{"use strict"});var gn=d(()=>{"use strict"});var Sn=d(()=>{"use strict";xn();yn();gn()});var wn=d(()=>{"use strict"});var _n=d(()=>{"use strict"});var Re,Rn=d(()=>{"use strict";(function(e){e.HTTP="http",e.HTTPS="https"})(Re||(Re={}))});var Tn=d(()=>{"use strict"});var In=d(()=>{"use strict"});var Cn=d(()=>{"use strict"});var An=d(()=>{"use strict"});var On=d(()=>{"use strict"});var vn=d(()=>{"use strict";Tn();In();Cn();An();On()});var bn=d(()=>{"use strict"});var Te,Br=d(()=>{"use strict";(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Te||(Te={}))});var Nn=d(()=>{"use strict";Br()});var Dn=d(()=>{"use strict"});var Pn=d(()=>{"use strict";Nn();Dn();Br()});var jr,kn=d(()=>{"use strict";(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(jr||(jr={}))});var Mn=d(()=>{"use strict"});var Fn=d(()=>{"use strict"});var $n=d(()=>{"use strict"});var Un=d(()=>{"use strict"});var Ln=d(()=>{"use strict"});var Hn=d(()=>{"use strict";Fn();$n();Un();Ln()});var zn=d(()=>{"use strict"});var F,qn=d(()=>{"use strict";F="__smithy_context"});var Gn=d(()=>{"use strict"});var K,Bn=d(()=>{"use strict";(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(K||(K={}))});var jn=d(()=>{"use strict"});var Vn=d(()=>{"use strict"});var Wn=d(()=>{"use strict"});var Yn=d(()=>{"use strict"});var Kn=d(()=>{"use strict"});var Xn=d(()=>{"use strict"});var Jn=d(()=>{"use strict"});var Qn=d(()=>{"use strict"});var Zn=d(()=>{"use strict"});var es,ts=d(()=>{"use strict";(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(es||(es={}))});var rs=d(()=>{"use strict"});var os=d(()=>{"use strict"});var ns=d(()=>{"use strict"});var ss=d(()=>{"use strict"});var is=d(()=>{"use strict"});var as=d(()=>{"use strict"});var b=d(()=>{"use strict";on();mn();un();fn();hn();En();Sn();wn();_n();Rn();vn();bn();Pn();kn();Mn();Hn();zn();qn();Gn();Bn();jn();Vn();Wn();Yn();Kn();Xn();Jn();Qn();Zn();ts();rs();os();ns();ss();is();as()});var cs,ds=d(()=>{"use strict";b();Ie();cs=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf($);return r===-1?!1:Object.values(K).includes(t.substring(0,r))}).reduce((t,[r,o])=>{let n=r.indexOf($),s=r.substring(0,n)===K.PROFILE?r.substring(n+1):r;return t[s]=o,t},{...e.default&&{default:e.default}})});var ps,Yc,gt,Vr=d(()=>{"use strict";ps=require("path");Je();Yc="AWS_CONFIG_FILE",gt=()=>process.env[Yc]||(0,ps.join)(we(),".aws","config")});var ls,Kc,ms,us=d(()=>{"use strict";ls=require("path");Je();Kc="AWS_SHARED_CREDENTIALS_FILE",ms=()=>process.env[Kc]||(0,ls.join)(we(),".aws","credentials")});var Xc,Jc,Qe,Wr=d(()=>{"use strict";b();Ie();Xc=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,Jc=["__proto__","profile __proto__"],Qe=e=>{let t={},r,o;for(let n of e.split(/\r?\n/)){let s=n.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,o=void 0;let a=s.substring(1,s.length-1),c=Xc.exec(a);if(c){let[,p,,f]=c;Object.values(K).includes(p)&&(r=[p,f].join($))}else r=a;if(Jc.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[c,p]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(p==="")o=c;else{o&&n.trimStart()===n&&(o=void 0),t[r]=t[r]||{};let f=o?[o,c].join($):c;t[r][f]=p}}}}return t}});var fs,Qc,Yr,Ze,Kr=d(()=>{"use strict";fs=require("fs"),{readFile:Qc}=fs.promises,Yr={},Ze=(e,t)=>((!Yr[e]||t!=null&&t.ignoreCache)&&(Yr[e]=Qc(e,"utf8")),Yr[e])});var hs,$,St,Ie=d(()=>{"use strict";ds();Vr();us();Wr();Kr();hs=()=>({}),$=".",St=async(e={})=>{let{filepath:t=ms(),configFilepath:r=gt()}=e,o=await Promise.all([Ze(r,{ignoreCache:e.ignoreCache}).then(Qe).then(cs).catch(hs),Ze(t,{ignoreCache:e.ignoreCache}).then(Qe).catch(hs)]);return{configFile:o[0],credentialsFile:o[1]}}});var Es,xs=d(()=>{"use strict";b();Ie();Es=e=>Object.entries(e).filter(([t])=>t.startsWith(K.SSO_SESSION+$)).reduce((t,[r,o])=>({...t,[r.split($)[1]]:o}),{})});var Zc,wt,ys=d(()=>{"use strict";Vr();xs();Wr();Kr();Zc=()=>({}),wt=async(e={})=>Ze(e.configFilepath??gt()).then(Qe).then(Es).catch(Zc)});var gs,Ss=d(()=>{"use strict";gs=(...e)=>{let t={};for(let r of e)for(let[o,n]of Object.entries(r))t[o]!==void 0?Object.assign(t[o],n):t[o]=n;return t}});var _t,ws=d(()=>{"use strict";Ie();Ss();_t=async e=>{let t=await St(e);return gs(t.configFile,t.credentialsFile)}});var _s=d(()=>{"use strict"});var he=d(()=>{"use strict";Je();Qo();qr();rn();Ie();ys();ws();_s()});var Xs,Js=d(()=>{"use strict";v();Xs=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new S(t.message||`Cannot load config from environment variables with getter: ${e}`)}}});var Qs,Zs=d(()=>{"use strict";v();he();Qs=(e,{preferredFile:t="config",...r}={})=>async()=>{let o=_e(r),{configFile:n,credentialsFile:s}=await St(r),i=s[o]||{},a=n[o]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let f=e(c,t==="config"?n:s);if(f===void 0)throw new Error;return f}catch(p){throw new S(p.message||`Cannot load config for profile ${o} in SDK configuration files with getter: ${e}`)}}});var bd,ei,ti=d(()=>{"use strict";v();bd=e=>typeof e=="function",ei=e=>bd(e)?async()=>await e():Wo(e)});var I,ri=d(()=>{"use strict";v();Js();Zs();ti();I=({environmentVariableSelector:e,configFileSelector:t,default:r},o={})=>Et(jo(Xs(e),Qs(t,o),ei(r)))});var ne=d(()=>{"use strict";ri()});function ai(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[o,n=null]=r.split("=");o=decodeURIComponent(o),n&&(n=decodeURIComponent(n)),o in t?Array.isArray(t[o])?t[o].push(n):t[o]=[t[o],n]:t[o]=n}return t}var ci=d(()=>{"use strict"});var Y,st=d(()=>{"use strict";ci();Y=e=>{if(typeof e=="string")return Y(new URL(e));let{hostname:t,pathname:r,port:o,protocol:n,search:s}=e,i;return s&&(i=ai(s)),{hostname:t,port:o?parseInt(o):void 0,protocol:n,path:r,query:i}}});function me(e){return new Promise((t,r)=>{var n;let o=(0,_a.request)({method:"GET",...e,hostname:(n=e.hostname)==null?void 0:n.replace(/^\[(.+)\]$/,"$1")});o.on("error",s=>{r(Object.assign(new k("Unable to connect to instance metadata service"),s)),o.destroy()}),o.on("timeout",()=>{r(new k("TimeoutError from instance metadata service")),o.destroy()}),o.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new k("Error response received from instance metadata service"),{statusCode:i})),o.destroy());let a=[];s.on("data",c=>{a.push(c)}),s.on("end",()=>{t(wa.Buffer.concat(a)),o.destroy()})}),o.end()})}var wa,_a,yr=d(()=>{"use strict";v();wa=require("buffer"),_a=require("http")});var gr,Sr,wo=d(()=>{"use strict";gr=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Sr=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)})});var KT,XT,pt,wr=d(()=>{"use strict";KT=1e3,XT=0,pt=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t})});var lt,_o=d(()=>{"use strict";lt=(e,t)=>{let r=e();for(let o=0;o<t;o++)r=r.catch(e);return r}});var Ra,_r,Rr,Ro,dp,pp,lp,mp,up,fp,Ta=d(()=>{"use strict";v();Ra=require("url");yr();wo();wr();_o();_r="AWS_CONTAINER_CREDENTIALS_FULL_URI",Rr="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Ro="AWS_CONTAINER_AUTHORIZATION_TOKEN",dp=(e={})=>{let{timeout:t,maxRetries:r}=pt(e);return()=>lt(async()=>{let o=await fp(),n=JSON.parse(await pp(t,o));if(!gr(n))throw new S("Invalid response received from instance metadata service.");return Sr(n)},r)},pp=async(e,t)=>(process.env[Ro]&&(t.headers={...t.headers,Authorization:process.env[Ro]}),(await me({...t,timeout:e})).toString()),lp="169.254.170.2",mp={localhost:!0,"127.0.0.1":!0},up={"http:":!0,"https:":!0},fp=async()=>{if(process.env[Rr])return{hostname:lp,path:process.env[Rr]};if(process.env[_r]){let e=(0,Ra.parse)(process.env[_r]);if(!e.hostname||!(e.hostname in mp))throw new S(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in up))throw new S(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new S(`The container metadata credential provider cannot be used unless the ${Rr} or ${_r} environment variable is set`,!1)}});var Tr,Ia=d(()=>{"use strict";v();Tr=class e extends S{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,e.prototype)}}});var mt,Ca=d(()=>{"use strict";(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(mt||(mt={}))});var hp,Ep,Aa,Oa=d(()=>{"use strict";hp="AWS_EC2_METADATA_SERVICE_ENDPOINT",Ep="ec2_metadata_service_endpoint",Aa={environmentVariableSelector:e=>e[hp],configFileSelector:e=>e[Ep],default:void 0}});var ue,To=d(()=>{"use strict";(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(ue||(ue={}))});var xp,yp,va,ba=d(()=>{"use strict";To();xp="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",yp="ec2_metadata_service_endpoint_mode",va={environmentVariableSelector:e=>e[xp],configFileSelector:e=>e[yp],default:ue.IPv4}});var Ir,gp,Sp,Io=d(()=>{"use strict";ne();st();Ca();Oa();To();ba();Ir=async()=>Y(await gp()||await Sp()),gp=async()=>I(Aa)(),Sp=async()=>{let e=await I(va)();switch(e){case ue.IPv4:return mt.IPv4;case ue.IPv6:return mt.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(ue)}`)}}});var wp,Co,Na=d(()=>{"use strict";wp="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Co=(e,t)=>{let r=300+Math.floor(Math.random()*300),o=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+wp);let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:o}}});var Da,Pa=d(()=>{"use strict";Na();Da=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,o;return async()=>{let n;try{n=await e(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=Co(n,r))}catch(s){if(o)r.warn("Credential renew failed: ",s),n=Co(o,r);else throw s}return o=n,n}}});var Fa,_p,Ao,ka,Ma,Rp,Tp,Ip,Cp,Ap,$a=d(()=>{"use strict";ne();v();Ia();yr();wo();wr();_o();Io();Pa();Fa="/latest/meta-data/iam/security-credentials/",_p="/latest/api/token",Ao="AWS_EC2_METADATA_V1_DISABLED",ka="ec2_metadata_v1_disabled",Ma="x-aws-ec2-metadata-token",Rp=(e={})=>Da(Tp(e),{logger:e.logger}),Tp=e=>{let t=!1,{logger:r,profile:o}=e,{timeout:n,maxRetries:s}=pt(e),i=async(a,c)=>{var l;if(t||((l=c.headers)==null?void 0:l[Ma])==null){let u=!1,m=!1,h=await I({environmentVariableSelector:x=>{let E=x[Ao];if(m=!!E&&E!=="false",E===void 0)throw new S(`${Ao} not set in env, checking config file next.`);return m},configFileSelector:x=>{let E=x[ka];return u=!!E&&E!=="false",u},default:!1},{profile:o})();if(e.ec2MetadataV1Disabled||h){let x=[];throw e.ec2MetadataV1Disabled&&x.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),u&&x.push(`config file profile (${ka})`),m&&x.push(`process environment variable (${Ao})`),new Tr(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${x.join(", ")}].`)}}let f=(await lt(async()=>{let u;try{u=await Cp(c)}catch(m){throw m.statusCode===401&&(t=!1),m}return u},a)).trim();return lt(async()=>{let u;try{u=await Ap(f,c)}catch(m){throw m.statusCode===401&&(t=!1),m}return u},a)};return async()=>{let a=await Ir();if(t)return r==null||r.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:n});{let c;try{c=(await Ip({...a,timeout:n})).toString()}catch(p){if((p==null?void 0:p.statusCode)===400)throw Object.assign(p,{message:"EC2 Metadata token request returned error"});return(p.message==="TimeoutError"||[403,404,405].includes(p.statusCode))&&(t=!0),r==null||r.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:n})}return i(s,{...a,headers:{[Ma]:c},timeout:n})}}},Ip=async e=>me({...e,path:_p,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),Cp=async e=>(await me({...e,path:Fa})).toString(),Ap=async(e,t)=>{let r=JSON.parse((await me({...t,path:Fa+e})).toString());if(!gr(r))throw new S("Invalid response received from instance metadata service.");return Sr(r)}});var Ua=d(()=>{"use strict"});var La={};qc(La,{DEFAULT_MAX_RETRIES:()=>XT,DEFAULT_TIMEOUT:()=>KT,ENV_CMDS_AUTH_TOKEN:()=>Ro,ENV_CMDS_FULL_URI:()=>_r,ENV_CMDS_RELATIVE_URI:()=>Rr,fromContainerMetadata:()=>dp,fromInstanceMetadata:()=>Rp,getInstanceMetadataEndpoint:()=>Ir,httpRequest:()=>me,providerConfigFromInit:()=>pt});var Ha=d(()=>{"use strict";Ta();$a();wr();Ua();yr();Io()});var Se=Hr(require("tynamo-pscan"),1);var Dc=require("@aws-sdk/client-dynamodb");v();he();var Rs=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var Rt=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,o){t.updateHttpClientConfig(r,o)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},Tt=e=>({httpHandler:e.httpHandler()});b();var C=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=ed(t.query)),t}};function ed(e){return Object.keys(e).reduce((t,r)=>{let o=e[r];return{...t,[r]:Array.isArray(o)?[...o]:o}},{})}var et=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var td=e=>t=>async r=>{if(!C.isInstance(r.request))return t(r);let{request:o}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!o.headers[":authority"])delete o.headers.host,o.headers[":authority"]=o.hostname+(o.port?":"+o.port:"");else if(!o.headers.host){let s=o.hostname;o.port!=null&&(s+=`:${o.port}`),o.headers.host=s}return t(r)},rd={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},It=e=>({applyToStack:t=>{t.add(td(e),rd)}});var od=()=>(e,t)=>async r=>{var o,n;try{let s=await e(r),{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:p={}}=t,{overrideInputFilterSensitiveLog:f,overrideOutputFilterSensitiveLog:l}=p,u=f??t.inputFilterSensitiveLog,m=l??t.outputFilterSensitiveLog,{$metadata:h,...x}=s.output;return(o=c==null?void 0:c.info)==null||o.call(c,{clientName:i,commandName:a,input:u(r.input),output:m(x),metadata:h}),s}catch(s){let{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:p={}}=t,{overrideInputFilterSensitiveLog:f}=p,l=f??t.inputFilterSensitiveLog;throw(n=c==null?void 0:c.error)==null||n.call(c,{clientName:i,commandName:a,input:l(r.input),error:s,metadata:s.$metadata}),s}},nd={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Ct=e=>({applyToStack:t=>{t.add(od(),nd)}});var Ts="X-Amzn-Trace-Id",sd="AWS_LAMBDA_FUNCTION_NAME",id="_X_AMZN_TRACE_ID",ad=e=>t=>async r=>{let{request:o}=r;if(!C.isInstance(o)||e.runtime!=="node"||o.headers.hasOwnProperty(Ts))return t(r);let n=process.env[sd],s=process.env[id],i=a=>typeof a=="string"&&a.length>0;return i(n)&&i(s)&&(o.headers[Ts]=s),t({...r,request:o})},cd={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},At=e=>({applyToStack:t=>{t.add(ad(e),cd)}});function Ot(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var dd=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),tt=e=>dd.test(e)||e.startsWith("[")&&e.endsWith("]");var pd=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),rt=(e,t=!1)=>{if(!t)return pd.test(e);let r=e.split(".");for(let o of r)if(!rt(o))return!1;return!0};var ot={};var X="endpoints";function U(e){return typeof e!="object"||e==null?e:"ref"in e?`$${U(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(U).join(", ")})`:JSON.stringify(e,null,2)}var _=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Is=(e,t)=>e===t;var Cs=e=>{let t=e.split("."),r=[];for(let o of t){let n=o.indexOf("[");if(n!==-1){if(o.indexOf("]")!==o.length-1)throw new _(`Path: '${e}' does not end with ']'`);let s=o.slice(n+1,-1);if(Number.isNaN(parseInt(s)))throw new _(`Invalid array index: '${s}' in path: '${e}'`);n!==0&&r.push(o.slice(0,n)),r.push(s)}else r.push(o)}return r};var vt=(e,t)=>Cs(t).reduce((r,o)=>{if(typeof r!="object")throw new _(`Index '${o}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(o)]:r[o]},e);var As=e=>e!=null;var Os=e=>!e;b();var Xr={[Re.HTTP]:80,[Re.HTTPS]:443},vs=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:u,port:m,protocol:h="",path:x="",query:E={}}=e,g=new URL(`${h}//${u}${m?`:${m}`:""}${x}`);return g.search=Object.entries(E).map(([w,G])=>`${w}=${G}`).join("&"),g}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:o,hostname:n,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(Re).includes(c))return null;let p=tt(n),f=r.includes(`${o}:${Xr[c]}`)||typeof e=="string"&&e.includes(`${o}:${Xr[c]}`),l=`${o}${f?`:${Xr[c]}`:""}`;return{scheme:c,authority:l,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:p}};var bs=(e,t)=>e===t;var Ns=(e,t,r,o)=>t>=r||e.length<r?null:o?e.substring(e.length-r,e.length-t):e.substring(t,r);var Ds=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var Ps={booleanEquals:Is,getAttr:vt,isSet:As,isValidHostLabel:rt,not:Os,parseURL:vs,stringEquals:bs,substring:Ns,uriEncode:Ds};var bt=(e,t)=>{let r=[],o={...t.endpointParams,...t.referenceRecord},n=0;for(;n<e.length;){let s=e.indexOf("{",n);if(s===-1){r.push(e.slice(n));break}r.push(e.slice(n,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),n=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,p]=a.split("#");r.push(vt(o[c],p))}else r.push(o[a]);n=i+1}return r.join("")};var ks=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var re=(e,t,r)=>{if(typeof e=="string")return bt(e,r);if(e.fn)return Nt(e,r);if(e.ref)return ks(e,r);throw new _(`'${t}': ${String(e)} is not a string, function or reference.`)};var Nt=({fn:e,argv:t},r)=>{let o=t.map(s=>["boolean","number"].includes(typeof s)?s:re(s,"arg",r)),n=e.split(".");return n[0]in ot&&n[1]!=null?ot[n[0]][n[1]](...o):Ps[e](...o)};var Ms=({assign:e,...t},r)=>{var n,s;if(e&&e in r.referenceRecord)throw new _(`'${e}' is already defined in Reference Record.`);let o=Nt(t,r);return(s=(n=r.logger)==null?void 0:n.debug)==null||s.call(n,X,`evaluateCondition: ${U(t)} = ${U(o)}`),{result:o===""?!0:!!o,...e!=null&&{toAssign:{name:e,value:o}}}};var Ce=(e=[],t)=>{var o,n;let r={};for(let s of e){let{result:i,toAssign:a}=Ms(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(n=(o=t.logger)==null?void 0:o.debug)==null||n.call(o,X,`assign: ${a.name} := ${U(a.value)}`))}return{result:!0,referenceRecord:r}};var Fs=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:n.map(s=>{let i=re(s,"Header value entry",t);if(typeof i!="string")throw new _(`Header '${o}' value '${i}' is not a string`);return i})}),{});var Jr=(e,t)=>{if(Array.isArray(e))return e.map(r=>Jr(r,t));switch(typeof e){case"string":return bt(e,t);case"object":if(e===null)throw new _(`Unexpected endpoint property: ${e}`);return Dt(e,t);case"boolean":return e;default:throw new _(`Unexpected endpoint property type: ${typeof e}`)}};var Dt=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:Jr(n,t)}),{});var $s=(e,t)=>{let r=re(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(o){throw console.error(`Failed to construct URL with ${r}`,o),o}throw new _(`Endpoint URL must be a string, got ${typeof r}`)};var Us=(e,t)=>{var f,l;let{conditions:r,endpoint:o}=e,{result:n,referenceRecord:s}=Ce(r,t);if(!n)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:p}=o;return(l=(f=t.logger)==null?void 0:f.debug)==null||l.call(f,X,`Resolving endpoint from template: ${U(o)}`),{...p!=null&&{headers:Fs(p,i)},...c!=null&&{properties:Dt(c,i)},url:$s(a,i)}};var Ls=(e,t)=>{let{conditions:r,error:o}=e,{result:n,referenceRecord:s}=Ce(r,t);if(n)throw new _(re(o,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var Hs=(e,t)=>{let{conditions:r,rules:o}=e,{result:n,referenceRecord:s}=Ce(r,t);if(n)return Pt(o,{...t,referenceRecord:{...t.referenceRecord,...s}})};var Pt=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let o=Us(r,t);if(o)return o}else if(r.type==="error")Ls(r,t);else if(r.type==="tree"){let o=Hs(r,t);if(o)return o}else throw new _(`Unknown endpoint rule: ${r}`);throw new _("Rules evaluation failed")};var nt=(e,t)=>{var p,f,l,u,m;let{endpointParams:r,logger:o}=t,{parameters:n,rules:s}=e;(f=(p=t.logger)==null?void 0:p.debug)==null||f.call(p,`${X} Initial EndpointParams: ${U(r)}`);let i=Object.entries(n).filter(([,h])=>h.default!=null).map(([h,x])=>[h,x.default]);if(i.length>0)for(let[h,x]of i)r[h]=r[h]??x;let a=Object.entries(n).filter(([,h])=>h.required).map(([h])=>h);for(let h of a)if(r[h]==null)throw new _(`Missing required parameter: '${h}'`);let c=Pt(s,{endpointParams:r,logger:o,referenceRecord:{}});if((l=t.endpointParams)!=null&&l.Endpoint)try{let h=new URL(t.endpointParams.Endpoint),{protocol:x,port:E}=h;c.url.protocol=x,c.url.port=E}catch{}return(m=(u=t.logger)==null?void 0:u.debug)==null||m.call(u,`${X} Resolved endpoint: ${U(c)}`),c};var Qr=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Qr(r))return!1;return!0}return!(!rt(e)||e.length<3||e.length>63||e!==e.toLowerCase()||tt(e))};var zs=e=>{let t=e.split(":");if(t.length<6)return null;let[r,o,n,s,i,...a]=t;return r!=="arn"||o===""||n===""||a[0]===""?null:{partition:o,service:n,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var qs={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var md=qs,ud="",Gs=e=>{let{partitions:t}=md;for(let o of t){let{regions:n,outputs:s}=o;for(let[i,a]of Object.entries(n))if(i===e)return{...s,...a}}for(let o of t){let{regionRegex:n,outputs:s}=o;if(new RegExp(n).test(e))return{...s}}let r=t.find(o=>o.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};var Bs=()=>ud;var fd={isVirtualHostableS3Bucket:Qr,parseArn:zs,partition:Gs};ot.aws=fd;var Zr="user-agent",kt="x-amz-user-agent",eo=" ",Mt="/",js=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Vs=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,to="-";var hd=e=>(t,r)=>async o=>{var u,m;let{request:n}=o;if(!C.isInstance(n))return t(o);let{headers:s}=n,i=((u=r==null?void 0:r.userAgent)==null?void 0:u.map(ro))||[],a=(await e.defaultUserAgentProvider()).map(ro),c=((m=e==null?void 0:e.customUserAgent)==null?void 0:m.map(ro))||[],p=Bs(),f=(p?[p]:[]).concat([...a,...i,...c]).join(eo),l=[...a.filter(h=>h.startsWith("aws-sdk-")),...c].join(eo);return e.runtime!=="browser"?(l&&(s[kt]=s[kt]?`${s[Zr]} ${l}`:l),s[Zr]=f):s[kt]=f,t({...o,request:n})},ro=e=>{var i;let t=e[0].split(Mt).map(a=>a.replace(js,to)).join(Mt),r=(i=e[1])==null?void 0:i.replace(Vs,to),o=t.indexOf(Mt),n=t.substring(0,o),s=t.substring(o+1);return n==="api"&&(s=s.toLowerCase()),[n,s,r].filter(a=>a&&a.length>0).reduce((a,c,p)=>{switch(p){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},Ed={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ft=e=>({applyToStack:t=>{t.add(hd(e),Ed)}});var Ae=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var oe;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(oe||(oe={}));var xd="AWS_USE_DUALSTACK_ENDPOINT",yd="use_dualstack_endpoint";var $t={environmentVariableSelector:e=>Ae(e,xd,oe.ENV),configFileSelector:e=>Ae(e,yd,oe.CONFIG),default:!1};var gd="AWS_USE_FIPS_ENDPOINT",Sd="use_fips_endpoint";var Ut={environmentVariableSelector:e=>Ae(e,gd,oe.ENV),configFileSelector:e=>Ae(e,Sd,oe.CONFIG),default:!1};b();var Lt=e=>e[F]||(e[F]={});var J=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var wd="AWS_REGION",_d="region",Oe={environmentVariableSelector:e=>e[wd],configFileSelector:e=>e[_d],default:()=>{throw new Error("Region is missing")}},Ht={preferredFile:"credentials"};var zt=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var oo=e=>zt(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var qt=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return oo(t);let o=await t();return oo(o)},useFipsEndpoint:async()=>{let o=typeof t=="string"?t:await t();return zt(o)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var Ws="content-length";function Rd(e){return t=>async r=>{let o=r.request;if(C.isInstance(o)){let{body:n,headers:s}=o;if(n&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Ws)===-1)try{let i=e(n);o.headers={...o.headers,[Ws]:String(i)}}catch{}}return t({...r,request:o})}}var Td={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Gt=e=>({applyToStack:t=>{t.add(Rd(e.bodyLengthChecker),Td)}});var Ys=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),vd(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Od(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Id=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Cd=/(\d+\.){3}\d+/,Ad=/\.\./;var Od=e=>Id.test(e)&&!Cd.test(e)&&!Ad.test(e),vd=e=>{let[t,r,o,n,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,o,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!o&&!!s&&!!i};var Ks=(e,t,r)=>{let o=async()=>{let n=r[e]??r[t];return typeof n=="function"?n():n};return e==="credentialScope"||t==="CredentialScope"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return(n==null?void 0:n.credentialScope)??(n==null?void 0:n.CredentialScope)}:e==="endpoint"||t==="endpoint"?async()=>{let n=await o();if(n&&typeof n=="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:s,hostname:i,port:a,path:c}=n;return`${s}//${i}${a?":"+a:""}${c}`}}return n}:o};ne();he();var oi="AWS_ENDPOINT_URL",ni="endpoint_url",si=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),o=t[[oi,...r].join("_")];if(o)return o;let n=t[oi];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join($)];if(n){let s=e.split(" ").map(a=>a.toLowerCase()),i=n[[s.join("_"),ni].join($)];if(i)return i}}let o=t[ni];if(o)return o},default:void 0});var ii=async e=>I(si(e))();st();var Bt=e=>typeof e=="object"?"url"in e?Y(e.url):e:Y(e);var di=async(e,t,r,o)=>{if(!r.endpoint){let i=await ii(r.serviceId||"");i&&(r.endpoint=()=>Promise.resolve(Bt(i)))}let n=await Nd(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,o)},Nd=async(e,t,r)=>{var s;let o={},n=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,a]of Object.entries(n))switch(a.type){case"staticContextParams":o[i]=a.value;break;case"contextParams":o[i]=e[a.name];break;case"clientContextParams":case"builtInParams":o[i]=await Ks(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(n).length===0&&Object.assign(o,r),String(r.serviceId).toLowerCase()==="s3"&&await Ys(o),o};var pi=({config:e,instructions:t})=>(r,o)=>async n=>{var a,c,p;let s=await di(n.input,{getEndpointParameterInstructions(){return t}},{...e},o);o.endpointV2=s,o.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;let i=(c=o.authSchemes)==null?void 0:c[0];if(i){o.signing_region=i.signingRegion,o.signing_service=i.signingName;let f=Lt(o),l=(p=f==null?void 0:f.selectedHttpAuthScheme)==null?void 0:p.httpAuthOption;l&&(l.signingProperties=Object.assign(l.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...n})};var li=(e,t)=>(r,o)=>async n=>{let{response:s}=await r(n);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var mi=(e,t)=>(r,o)=>async n=>{var a;let s=(a=o.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(o.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(n.input,{...e,endpoint:s});return r({...n,request:i})};var Dd={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},it={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function se(e,t,r){return{applyToStack:o=>{o.add(li(e,r),Dd),o.add(mi(e,t),it)}}}var no={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:it.name},ie=(e,t)=>({applyToStack:r=>{r.addRelativeTo(pi({config:e,instructions:t}),no)}});var jt=e=>{let t=e.tls??!0,{endpoint:r}=e,o=r!=null?async()=>Bt(await J(r)()):void 0;return{...e,endpoint:o,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:J(e.useDualstackEndpoint??!1),useFipsEndpoint:J(e.useFipsEndpoint??!1)}};var B;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(B||(B={}));var Ee=3,ve=B.STANDARD;var ui=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],fi=["TimeoutError","RequestTimeout","RequestTimeoutException"],hi=[500,502,503,504],Ei=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var be=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||ui.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},Vt=e=>{var t;return fi.includes(e.name)||Ei.includes((e==null?void 0:e.code)||"")||hi.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},xi=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Vt(e)}return!1};var at=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(o=>setTimeout(o,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),be(t)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let o=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(o)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let o=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(o*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Wt="amz-sdk-invocation-id",Yt="amz-sdk-request";var yi=()=>{let e=100;return{computeNextBackoffDelay:o=>Math.floor(Math.min(2e4,Math.random()*2**o*e)),setDelayBase:o=>{e=o}}};var so=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var xe=class{constructor(t){this.maxAttempts=t,this.mode=B.STANDARD,this.capacity=500,this.retryBackoffStrategy=yi(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return so({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let o=await this.getMaxAttempts();if(this.shouldRetry(t,r,o)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(n);return this.capacity-=a,so({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ee}`),Ee}}shouldRetry(t,r,o){return t.getRetryCount()+1<o&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Xt=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=B.ADAPTIVE;let{rateLimiter:o}=r??{};this.rateLimiter=o??new at,this.standardRetryStrategy=new xe(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Ri=Hr(require("crypto")),Qt=new Uint8Array(256),Jt=Qt.length;function ao(){return Jt>Qt.length-16&&(Ri.default.randomFillSync(Qt),Jt=0),Qt.slice(Jt,Jt+=16)}var Ti=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Pd(e){return typeof e=="string"&&Ti.test(e)}var Ii=Pd;var O=[];for(let e=0;e<256;++e)O.push((e+256).toString(16).substr(1));function kd(e,t=0){let r=(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase();if(!Ii(r))throw TypeError("Stringified UUID is invalid");return r}var Ci=kd;function Md(e,t,r){e=e||{};let o=e.random||(e.rng||ao)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=o[n];return t}return Ci(o)}var co=Md;var po=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var Ai="AWS_MAX_ATTEMPTS",Oi="max_attempts",Zt={environmentVariableSelector:e=>{let t=e[Ai];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${Ai} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Oi];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Oi} mast be a number, got "${t}"`);return r},default:Ee},er=e=>{let{retryStrategy:t}=e,r=J(e.maxAttempts??Ee);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await J(e.retryMode)()===B.ADAPTIVE?new Xt(r):new xe(r))}},Fd="AWS_RETRY_MODE",$d="retry_mode",tr={environmentVariableSelector:e=>e[Fd],configFileSelector:e=>e[$d],default:ve};var ae=class{trace(){}debug(){}info(){}warn(){}error(){}};var ye=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let o of t)r.push(o);return r},ce=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,De=()=>{let e=[],t=[],r=!1,o=new Set,n=l=>l.sort((u,m)=>vi[m.step]-vi[u.step]||bi[m.priority||"normal"]-bi[u.priority||"normal"]),s=l=>{let u=!1,m=h=>{let x=ye(h.name,h.aliases);if(x.includes(l)){u=!0;for(let E of x)o.delete(E);return!1}return!0};return e=e.filter(m),t=t.filter(m),u},i=l=>{let u=!1,m=h=>{if(h.middleware===l){u=!0;for(let x of ye(h.name,h.aliases))o.delete(x);return!1}return!0};return e=e.filter(m),t=t.filter(m),u},a=l=>{var u;return e.forEach(m=>{l.add(m.middleware,{...m})}),t.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),(u=l.identifyOnResolve)==null||u.call(l,f.identifyOnResolve()),l},c=l=>{let u=[];return l.before.forEach(m=>{m.before.length===0&&m.after.length===0?u.push(m):u.push(...c(m))}),u.push(l),l.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?u.push(m):u.push(...c(m))}),u},p=(l=!1)=>{let u=[],m=[],h={};return e.forEach(E=>{let g={...E,before:[],after:[]};for(let w of ye(g.name,g.aliases))h[w]=g;u.push(g)}),t.forEach(E=>{let g={...E,before:[],after:[]};for(let w of ye(g.name,g.aliases))h[w]=g;m.push(g)}),m.forEach(E=>{if(E.toMiddleware){let g=h[E.toMiddleware];if(g===void 0){if(l)return;throw new Error(`${E.toMiddleware} is not found when adding ${ce(E.name,E.aliases)} middleware ${E.relation} ${E.toMiddleware}`)}E.relation==="after"&&g.after.push(E),E.relation==="before"&&g.before.push(E)}}),n(u).map(c).reduce((E,g)=>(E.push(...g),E),[])},f={add:(l,u={})=>{let{name:m,override:h,aliases:x}=u,E={step:"initialize",priority:"normal",middleware:l,...u},g=ye(m,x);if(g.length>0){if(g.some(w=>o.has(w))){if(!h)throw new Error(`Duplicate middleware name '${ce(m,x)}'`);for(let w of g){let G=e.findIndex(Ye=>{var Ke;return Ye.name===w||((Ke=Ye.aliases)==null?void 0:Ke.some(Ur=>Ur===w))});if(G===-1)continue;let D=e[G];if(D.step!==E.step||E.priority!==D.priority)throw new Error(`"${ce(D.name,D.aliases)}" middleware with ${D.priority} priority in ${D.step} step cannot be overridden by "${ce(m,x)}" middleware with ${E.priority} priority in ${E.step} step.`);e.splice(G,1)}}for(let w of g)o.add(w)}e.push(E)},addRelativeTo:(l,u)=>{let{name:m,override:h,aliases:x}=u,E={middleware:l,...u},g=ye(m,x);if(g.length>0){if(g.some(w=>o.has(w))){if(!h)throw new Error(`Duplicate middleware name '${ce(m,x)}'`);for(let w of g){let G=t.findIndex(Ye=>{var Ke;return Ye.name===w||((Ke=Ye.aliases)==null?void 0:Ke.some(Ur=>Ur===w))});if(G===-1)continue;let D=t[G];if(D.toMiddleware!==E.toMiddleware||D.relation!==E.relation)throw new Error(`"${ce(D.name,D.aliases)}" middleware ${D.relation} "${D.toMiddleware}" middleware cannot be overridden by "${ce(m,x)}" middleware ${E.relation} "${E.toMiddleware}" middleware.`);t.splice(G,1)}}for(let w of g)o.add(w)}t.push(E)},clone:()=>a(De()),use:l=>{l.applyToStack(f)},remove:l=>typeof l=="string"?s(l):i(l),removeByTag:l=>{let u=!1,m=h=>{let{tags:x,name:E,aliases:g}=h;if(x&&x.includes(l)){let w=ye(E,g);for(let G of w)o.delete(G);return u=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),u},concat:l=>{var m;let u=a(De());return u.use(l),u.identifyOnResolve(r||u.identifyOnResolve()||(((m=l.identifyOnResolve)==null?void 0:m.call(l))??!1)),u},applyToStack:a,identify:()=>p(!0).map(l=>{let u=l.step??l.relation+" "+l.toMiddleware;return ce(l.name,l.aliases)+" - "+u}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,u)=>{for(let m of p().map(h=>h.middleware).reverse())l=m(l,u);return r&&console.log(f.identify()),l}};return f},vi={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},bi={high:3,normal:2,low:1};var Pe=class{constructor(t){this.middlewareStack=De(),this.config=t}send(t,r,o){let n=typeof r!="function"?r:void 0,s=typeof r=="function"?r:o,i=t.resolveMiddleware(this.middlewareStack,this.config,n);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var Ni=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var rr=require("buffer"),de=(e,t=0,r=e.byteLength-t)=>{if(!Ni(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return rr.Buffer.from(e,t,r)},ke=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?rr.Buffer.from(e,t):rr.Buffer.from(e)};var Ud=/^[A-Za-z0-9+/]*={0,2}$/,Me=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Ud.exec(e))throw new TypeError("Invalid base64 string.");let t=ke(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var Fe=e=>de(e.buffer,e.byteOffset,e.byteLength).toString("base64");var pe=e=>{let t=ke(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Di=e=>typeof e=="string"?pe(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var $e=e=>de(e.buffer,e.byteOffset,e.byteLength).toString("utf8");function Pi(e,t="utf-8"){return t==="base64"?Fe(e):$e(e)}function ki(e,t){return t==="base64"?Q.mutate(Me(e)):Q.mutate(pe(e))}var Q=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return ki(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return Pi(this,t)}};var Ld=require("@smithy/node-http-handler");var or=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Q.mutate(e);if(!e)return Q.mutate(new Uint8Array);let r=t.streamCollector(e);return Q.mutate(await r)};b();var j=class{constructor(){this.middlewareStack=De()}static classBuilder(){return new lo}resolveMiddlewareWithContext(t,r,o,{middlewareFn:n,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:p,additionalContext:f,CommandCtor:l}){for(let E of n.bind(this)(l,t,r,o))this.middlewareStack.use(E);let u=t.concat(this.middlewareStack),{logger:m}=r,h={logger:m,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[F]:{...p},...f},{requestHandler:x}=r;return u.resolve(E=>x.handle(E.request,o||{}),h)}},lo=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,o={}){return this._smithyContext={service:t,operation:r,...o},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=o=>o,r=o=>o){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){let t=this,r;return r=class extends j{static getEndpointParameterInstructions(){return t._ep}constructor(o){super(),this.input=o,this.serialize=t._serializer,this.deserialize=t._deserializer,t._init(this)}resolveMiddleware(o,n,s){return this.resolveMiddlewareWithContext(o,n,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}};var nr="***SensitiveInformation***";var Mi=(e,t)=>{for(let r of Object.keys(e)){let o=e[r],n=async function(i,a,c){let p=new o(i);if(typeof a=="function")this.send(p,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(p,a||{},c)}else return this.send(p,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=n}};var Gw=Math.ceil(34028234663852886e22);var sr=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var ir=e=>Hd(e,32);var Hd=(e,t)=>{let r=sr(e);if(r!==void 0&&zd(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},zd=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},le=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Ue=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},y=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Gd.warn(qd(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var qd=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Gd={warn:console.warn};var Xw=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var Jw=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/);var Qw=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Zw=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),e_=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var t_=50*365*24*60*60*1e3;var Le=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},A=(e,t={})=>{Object.entries(t).filter(([,o])=>o!==void 0).forEach(([o,n])=>{(e[o]==null||e[o]==="")&&(e[o]=n)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var Bd=({output:e,parsedBody:t,exceptionCtor:r,errorCode:o})=>{let n=jd(e),s=n.httpStatusCode?n.httpStatusCode+"":void 0,i=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||o||s||"UnknownError",$fault:"client",$metadata:n});throw A(i,t)},ar=e=>({output:t,parsedBody:r,errorCode:o})=>{Bd({output:t,parsedBody:r,exceptionCtor:e,errorCode:o})},jd=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var cr=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Fi=!1,dr=e=>{e&&!Fi&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Fi=!0)};b();var $i=e=>{let t=[];for(let r in Te){let o=Te[r];e[o]!==void 0&&t.push({algorithmId:()=>o,checksumConstructor:()=>e[o]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},Ui=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var Li=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},Hi=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var pr=e=>({...$i(e),...Li(e)});var lr=e=>({...Ui(e),...Hi(e)});function mo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var uo=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};uo.prototype=Object.create(String.prototype,{constructor:{value:uo,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(uo,String);function R(e,t,r){let o,n,s;if(typeof t>"u"&&typeof r>"u")o={},s=e;else{if(o=e,typeof t=="function")return n=t,s=r,Vd(o,n,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){o[i]=s[i];continue}zi(o,null,s,i)}return o}var T=(e,t)=>{let r={};for(let o in t)zi(r,e,t,o);return r},Vd=(e,t,r)=>R(e,Object.entries(r).reduce((o,[n,s])=>(Array.isArray(s)?o[n]=s:typeof s=="function"?o[n]=[t,s()]:o[n]=[t,s],o),{})),zi=(e,t,r,o)=>{if(t!==null){let i=r[o];typeof i=="function"&&(i=[,i]);let[a=Wd,c=Yd,p=o]=i;(typeof a=="function"&&a(t[p])||typeof a!="function"&&a)&&(e[o]=c(t[p]));return}let[n,s]=r[o];if(typeof s=="function"){let i,a=n===void 0&&(i=s())!=null,c=typeof n=="function"&&!!n(void 0)||typeof n!="function"&&!!n;a?e[o]=i:c&&(e[o]=s())}else{let i=n===void 0&&s!=null,a=typeof n=="function"&&!!n(s)||typeof n!="function"&&!!n;(i||a)&&(e[o]=s)}},Wd=e=>e!=null,Yd=e=>e;var qi=(e,t,r,o,n,s)=>{if(t!=null&&t[r]!==void 0){let i=o();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(n,s?i.split("/").map(a=>mo(a)).join("/"):mo(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};var ge=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(ge);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=ge(e[r]));return t}return e};var Gi=require("stream"),Bi=e=>(e==null?void 0:e.body)instanceof Gi.Readable||typeof ReadableStream<"u"&&(e==null?void 0:e.body)instanceof ReadableStream;var Kd=e=>(t,r)=>async o=>{var i;let n=await e.retryStrategy(),s=await e.maxAttempts();if(Xd(n)){n=n;let a=await n.acquireInitialRetryToken(r.partition_id),c=new Error,p=0,f=0,{request:l}=o,u=C.isInstance(l);for(u&&(l.headers[Wt]=co());;)try{u&&(l.headers[Yt]=`attempt=${p+1}; max=${s}`);let{response:m,output:h}=await t(o);return n.recordSuccess(a),h.$metadata.attempts=p+1,h.$metadata.totalRetryDelay=f,{response:m,output:h}}catch(m){let h=Jd(m);if(c=po(m),u&&Bi(l))throw(i=r.logger instanceof ae?console:r.logger)==null||i.warn("An error was encountered in a non-retryable streaming request."),c;try{a=await n.refreshRetryTokenForRetry(a,h)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=p+1,c.$metadata.totalRetryDelay=f,c}p=a.getRetryCount();let x=a.getRetryDelay();f+=x,await new Promise(E=>setTimeout(E,x))}}else return n=n,n!=null&&n.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(t,o)},Xd=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Jd=e=>{let t={errorType:Qd(e)},r=Zd(e.$response);return r&&(t.retryAfterHint=r),t},Qd=e=>be(e)?"THROTTLING":Vt(e)?"TRANSIENT":xi(e)?"SERVER_ERROR":"CLIENT_ERROR",fo={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},mr=e=>({applyToStack:t=>{t.add(Kd(e),fo)}}),Zd=e=>{if(!et.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],o=Number(r);return Number.isNaN(o)?new Date(r):new Date(o*1e3)};var ji=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Vi={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Wi={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.485.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/core":"3.485.0","@aws-sdk/middleware-host-header":"3.485.0","@aws-sdk/middleware-logger":"3.485.0","@aws-sdk/middleware-recursion-detection":"3.485.0","@aws-sdk/middleware-user-agent":"3.485.0","@aws-sdk/region-config-resolver":"3.485.0","@aws-sdk/types":"3.485.0","@aws-sdk/util-endpoints":"3.485.0","@aws-sdk/util-user-agent-browser":"3.485.0","@aws-sdk/util-user-agent-node":"3.485.0","@smithy/config-resolver":"^2.0.23","@smithy/core":"^1.2.2","@smithy/fetch-http-handler":"^2.3.2","@smithy/hash-node":"^2.0.18","@smithy/invalid-dependency":"^2.0.16","@smithy/middleware-content-length":"^2.0.18","@smithy/middleware-endpoint":"^2.3.0","@smithy/middleware-retry":"^2.0.26","@smithy/middleware-serde":"^2.0.16","@smithy/middleware-stack":"^2.0.10","@smithy/node-config-provider":"^2.1.9","@smithy/node-http-handler":"^2.2.2","@smithy/protocol-http":"^3.0.12","@smithy/smithy-client":"^2.2.1","@smithy/types":"^2.8.0","@smithy/url-parser":"^2.0.16","@smithy/util-base64":"^2.0.1","@smithy/util-body-length-browser":"^2.0.1","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.24","@smithy/util-defaults-mode-node":"^2.0.32","@smithy/util-endpoints":"^1.0.8","@smithy/util-retry":"^2.0.9","@smithy/util-utf8":"^2.0.2",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var Yi=!1,Ki=e=>{e&&!Yi&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Yi=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 14.x on May 1, 2024.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to an active Node.js LTS version.

More information can be found at: https://a.co/dzr2AJd`))};b();var wR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:no.name};var IR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:it.name};b();var LR={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:fo.name};b();var rp=e=>t=>op(t)&&t.expiration.getTime()-Date.now()<e;var ZR=rp(3e5),op=e=>e.expiration!==void 0;b();function Xi(e,t){return new ho(e,t)}var ho=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:o,path:n}=await this.context.endpoint();this.path=n;for(let s of this.resolvePathStack)s(this.path);return new C({protocol:r,hostname:this.hostname||t,port:o,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,o,n){return this.resolvePathStack.push(s=>{this.path=qi(s,this.input,t,r,o,n)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}};ne();var ur=require("os"),ct=require("process");var Eo={isCrtAvailable:!1};var Ji=()=>Eo.isCrtAvailable?["md/crt-avail"]:null;var np="AWS_SDK_UA_APP_ID",sp="sdk-ua-app-id",fr=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,ur.platform)()}`,(0,ur.release)()],["lang/js"],["md/nodejs",`${ct.versions.node}`]],o=Ji();o&&r.push(o),e&&r.push([`api/${e}`,t]),ct.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${ct.env.AWS_EXECUTION_ENV}`]);let n=I({environmentVariableSelector:i=>i[np],configFileSelector:i=>i[sp],default:void 0})(),s;return async()=>{if(!s){let i=await n;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var Zi=require("buffer"),hr=require("crypto"),He=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(Di(Qi(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,hr.createHmac)(this.algorithmIdentifier,Qi(this.secret)):(0,hr.createHash)(this.algorithmIdentifier)}};function Qi(e,t){return Zi.Buffer.isBuffer(e)?e:typeof e=="string"?ke(e,t):ArrayBuffer.isView(e)?de(e.buffer,e.byteOffset,e.byteLength):de(e)}ne();var Ar=require("@smithy/node-http-handler");var Er=require("fs"),xr=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Er.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Er.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};st();var da="required",H="fn",z="argv",Ge="ref";var ea="isSet",dt="booleanEquals",ze="error",qe="endpoint",Z="tree",xo="PartitionResult",yo="getAttr",ta={[da]:!1,type:"String"},ra={[da]:!0,default:!1,type:"Boolean"},oa={[Ge]:"Endpoint"},pa={[H]:dt,[z]:[{[Ge]:"UseFIPS"},!0]},la={[H]:dt,[z]:[{[Ge]:"UseDualStack"},!0]},L={},na={[H]:yo,[z]:[{[Ge]:xo},"supportsFIPS"]},ma={[Ge]:xo},sa={[H]:dt,[z]:[!0,{[H]:yo,[z]:[ma,"supportsDualStack"]}]},ia=[pa],aa=[la],ca=[{[Ge]:"Region"}],ip={version:"1.0",parameters:{Region:ta,UseDualStack:ra,UseFIPS:ra,Endpoint:ta},rules:[{conditions:[{[H]:ea,[z]:[oa]}],rules:[{conditions:ia,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ze},{conditions:aa,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ze},{endpoint:{url:oa,properties:L,headers:L},type:qe}],type:Z},{conditions:[{[H]:ea,[z]:ca}],rules:[{conditions:[{[H]:"aws.partition",[z]:ca,assign:xo}],rules:[{conditions:[pa,la],rules:[{conditions:[{[H]:dt,[z]:[!0,na]},sa],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:L,headers:L},type:qe}],type:Z},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ze}],type:Z},{conditions:ia,rules:[{conditions:[{[H]:dt,[z]:[na,!0]}],rules:[{conditions:[{[H]:"stringEquals",[z]:[{[H]:yo,[z]:[ma,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:L,headers:L},type:qe},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:L,headers:L},type:qe}],type:Z},{error:"FIPS is enabled but this partition does not support FIPS",type:ze}],type:Z},{conditions:aa,rules:[{conditions:[sa],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:L,headers:L},type:qe}],type:Z},{error:"DualStack is enabled but this partition does not support DualStack",type:ze}],type:Z},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:L,headers:L},type:qe}],type:Z}],type:Z},{error:"Invalid Configuration: Missing Region",type:ze}]},ua=ip;var fa=(e,t={})=>nt(ua,{endpointParams:e,logger:t.logger});var ha=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Me,base64Encoder:(e==null?void 0:e.base64Encoder)??Fe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??fa,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new ae,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??Y,utf8Decoder:(e==null?void 0:e.utf8Decoder)??pe,utf8Encoder:(e==null?void 0:e.utf8Encoder)??$e});ne();v();var Ea="AWS_EXECUTION_ENV",go="AWS_REGION",So="AWS_DEFAULT_REGION",xa="AWS_EC2_METADATA_DISABLED",ya=["in-region","cross-region","mobile","standard","legacy"],ga="/latest/meta-data/placement/region";var ap="AWS_DEFAULTS_MODE",cp="defaults_mode",Sa={environmentVariableSelector:e=>e[ap],configFileSelector:e=>e[cp],default:"legacy"};var Cr=({region:e=I(Oe),defaultsMode:t=I(Sa)}={})=>Et(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return Op(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ya.join(", ")}, got ${r}`)}}),Op=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await vp();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},vp=async()=>{if(process.env[Ea]&&(process.env[go]||process.env[So]))return process.env[go]??process.env[So];if(!process.env[xa])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>(Ha(),La)),r=await e();return(await t({...r,path:ga})).toString()}catch{}};var za=e=>{dr(process.version);let t=Cr(e),r=()=>t().then(cr),o=ha(e);return Ki(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??xr,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??fr({serviceId:o.serviceId,clientVersion:Wi.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(Zt),region:(e==null?void 0:e.region)??I(Oe,Ht),requestHandler:(e==null?void 0:e.requestHandler)??new Ar.NodeHttpHandler(r),retryMode:(e==null?void 0:e.retryMode)??I({...tr,default:async()=>(await r()).retryMode||ve}),sha256:(e==null?void 0:e.sha256)??He.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ar.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I($t),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(Ut)}};var Or=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},vr=e=>({region:e.region()});var Oo=e=>e,qa=(e,t)=>{let r={...Oo(Or(e)),...Oo(pr(e)),...Oo(Rt(e))};return t.forEach(o=>o.configure(r)),{...e,...vr(r),...lr(r),...Tt(r)}};var br=class extends Pe{constructor(...[t]){let r=za(t||{}),o=ji(r),n=qt(o),s=jt(n),i=er(s),a=i,c=Ot(a),p=qa(c,(t==null?void 0:t.extensions)||[]);super(p),this.config=p,this.middlewareStack.use(mr(this.config)),this.middlewareStack.use(Gt(this.config)),this.middlewareStack.use(It(this.config)),this.middlewareStack.use(Ct(this.config)),this.middlewareStack.use(At(this.config)),this.middlewareStack.use(Ft(this.config))}destroy(){super.destroy()}};var ee=class e extends Le{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Nr=class e extends ee{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Dr=class e extends ee{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Pr=class e extends ee{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},kr=class e extends ee{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ga=e=>({...e,...e.accessToken&&{accessToken:nr}}),Dp=e=>({...e,...e.secretAccessKey&&{secretAccessKey:nr},...e.sessionToken&&{sessionToken:nr}}),Ba=e=>({...e,...e.roleCredentials&&{roleCredentials:Dp(e.roleCredentials)}});var ja=async(e,t)=>{let r=Xi(e,t),o=R({},Hp,{[Vp]:e[qp]});r.bp("/federation/credentials");let n=R({[jp]:[,le(e[Bp],"roleName")],[Gp]:[,le(e[zp],"accountId")]});return r.m("GET").h(o).q(n).b(void 0),r.build()};var Va=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Pp(e,t);let r=R({$metadata:ut(e)}),o=le(Ue(await Wa(e.body,t)),"body"),n=T(o,{roleCredentials:ge});return Object.assign(r,n),r},Pp=async(e,t)=>{let r={...e,body:await Wp(e.body,t)},o=Yp(e,r.body);switch(o){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Mp(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Fp(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await $p(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Up(r,t);default:let n=r.body;return kp({output:e,parsedBody:n,errorCode:o})}};var kp=ar(ee),Mp=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{message:y});Object.assign(r,n);let s=new Nr({$metadata:ut(e),...r});return A(s,e.body)},Fp=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{message:y});Object.assign(r,n);let s=new Dr({$metadata:ut(e),...r});return A(s,e.body)},$p=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{message:y});Object.assign(r,n);let s=new Pr({$metadata:ut(e),...r});return A(s,e.body)},Up=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{message:y});Object.assign(r,n);let s=new kr({$metadata:ut(e),...r});return A(s,e.body)},ut=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Lp=(e,t)=>or(e,t).then(r=>t.utf8Encoder(r)),Hp=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),zp="accountId",qp="accessToken",Gp="account_id";var Bp="roleName",jp="role_name",Vp="x-amz-sso_bearer_token",Wa=(e,t)=>Lp(e,t).then(r=>r.length?JSON.parse(r):{}),Wp=async(e,t)=>{let r=await Wa(e,t);return r.message=r.message??r.Message,r},Yp=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),o=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)};var Mr=class extends j.classBuilder().ep({...Vi}).m(function(t,r,o,n){return[se(o,this.serialize,this.deserialize),ie(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Ga,Ba).ser(ja).de(Va).build(){};ne();var Fr=require("@smithy/node-http-handler");st();b();b();b();var Kp=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),Xp={version:"3.429.0"},oc="required",V="fn",W="argv",Ve="ref",Ya="isSet",te="tree",Be="error",je="endpoint",Do="PartitionResult",Po="getAttr",Ka={[oc]:!1,type:"String"},Xa={[oc]:!0,default:!1,type:"Boolean"},Ja={[Ve]:"Endpoint"},nc={[V]:"booleanEquals",[W]:[{[Ve]:"UseFIPS"},!0]},sc={[V]:"booleanEquals",[W]:[{[Ve]:"UseDualStack"},!0]},q={},Qa={[V]:"booleanEquals",[W]:[!0,{[V]:Po,[W]:[{[Ve]:Do},"supportsFIPS"]}]},ic={[Ve]:Do},Za={[V]:"booleanEquals",[W]:[!0,{[V]:Po,[W]:[ic,"supportsDualStack"]}]},ec=[nc],tc=[sc],rc=[{[Ve]:"Region"}],Jp={version:"1.0",parameters:{Region:Ka,UseDualStack:Xa,UseFIPS:Xa,Endpoint:Ka},rules:[{conditions:[{[V]:Ya,[W]:[Ja]}],type:te,rules:[{conditions:ec,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Be},{conditions:tc,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Be},{endpoint:{url:Ja,properties:q,headers:q},type:je}]},{conditions:[{[V]:Ya,[W]:rc}],type:te,rules:[{conditions:[{[V]:"aws.partition",[W]:rc,assign:Do}],type:te,rules:[{conditions:[nc,sc],type:te,rules:[{conditions:[Qa,Za],type:te,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:q,headers:q},type:je}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Be}]},{conditions:ec,type:te,rules:[{conditions:[Qa],type:te,rules:[{conditions:[{[V]:"stringEquals",[W]:["aws-us-gov",{[V]:Po,[W]:[ic,"name"]}]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:q,headers:q},type:je},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:q,headers:q},type:je}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Be}]},{conditions:tc,type:te,rules:[{conditions:[Za],type:te,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:q,headers:q},type:je}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Be}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:q,headers:q},type:je}]}]},{error:"Invalid Configuration: Missing Region",type:Be}]},Qp=Jp,Zp=(e,t={})=>nt(Qp,{endpointParams:e,logger:t.logger}),el=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Me,base64Encoder:(e==null?void 0:e.base64Encoder)??Fe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Zp,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new ae,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??Y,utf8Decoder:(e==null?void 0:e.utf8Decoder)??pe,utf8Encoder:(e==null?void 0:e.utf8Encoder)??$e}),tl=e=>{dr(process.version);let t=Cr(e),r=()=>t().then(cr),o=el(e);return{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??xr,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??fr({serviceId:o.serviceId,clientVersion:Xp.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(Zt),region:(e==null?void 0:e.region)??I(Oe,Ht),requestHandler:(e==null?void 0:e.requestHandler)??new Fr.NodeHttpHandler(r),retryMode:(e==null?void 0:e.retryMode)??I({...tr,default:async()=>(await r()).retryMode||ve}),sha256:(e==null?void 0:e.sha256)??He.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Fr.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I($t),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(Ut)}},vo=e=>e,rl=(e,t)=>{let r={...vo(Or(e)),...vo(pr(e)),...vo(Rt(e))};return t.forEach(o=>o.configure(r)),{...e,...vr(r),...lr(r),...Tt(r)}},ko=class extends Pe{constructor(...[e]){let t=tl(e||{}),r=Kp(t),o=qt(r),n=jt(o),s=er(n),i=s,a=Ot(i),c=rl(a,(e==null?void 0:e.extensions)||[]);super(c),this.config=c,this.middlewareStack.use(mr(this.config)),this.middlewareStack.use(Gt(this.config)),this.middlewareStack.use(It(this.config)),this.middlewareStack.use(Ct(this.config)),this.middlewareStack.use(At(this.config)),this.middlewareStack.use(Ft(this.config))}destroy(){super.destroy()}},P=class ac extends Le{constructor(t){super(t),Object.setPrototypeOf(this,ac.prototype)}},ol=class cc extends P{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,cc.prototype),this.error=t.error,this.error_description=t.error_description}},nl=class dc extends P{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,dc.prototype),this.error=t.error,this.error_description=t.error_description}},sl=class pc extends P{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,pc.prototype),this.error=t.error,this.error_description=t.error_description}},il=class lc extends P{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,lc.prototype),this.error=t.error,this.error_description=t.error_description}},al=class mc extends P{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,mc.prototype),this.error=t.error,this.error_description=t.error_description}},cl=class uc extends P{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,uc.prototype),this.error=t.error,this.error_description=t.error_description}},dl=class fc extends P{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,fc.prototype),this.error=t.error,this.error_description=t.error_description}},pl=class hc extends P{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,hc.prototype),this.error=t.error,this.error_description=t.error_description}},ll=class Ec extends P{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Ec.prototype),this.error=t.error,this.error_description=t.error_description}},ml=class xc extends P{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,xc.prototype),this.error=t.error,this.error_description=t.error_description}},ul=class yc extends P{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,yc.prototype),this.error=t.error,this.error_description=t.error_description}},fl=class gc extends P{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,gc.prototype),this.error=t.error,this.error_description=t.error_description}},hl=async(e,t)=>{let{hostname:r,protocol:o="https",port:n,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(T(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:p=>ge(p)})),new C({protocol:o,hostname:r,port:n,method:"POST",headers:i,path:a,body:c})},El=async(e,t)=>{let{hostname:r,protocol:o="https",port:n,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/client/register`,c;return c=JSON.stringify(T(e,{clientName:[],clientType:[],scopes:p=>ge(p)})),new C({protocol:o,hostname:r,port:n,method:"POST",headers:i,path:a,body:c})},xl=async(e,t)=>{let{hostname:r,protocol:o="https",port:n,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,c;return c=JSON.stringify(T(e,{clientId:[],clientSecret:[],startUrl:[]})),new C({protocol:o,hostname:r,port:n,method:"POST",headers:i,path:a,body:c})},yl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return gl(e,t);let r=R({$metadata:N(e)}),o=le(Ue(await $r(e.body,t)),"body"),n=T(o,{accessToken:y,expiresIn:ir,idToken:y,refreshToken:y,tokenType:y});return Object.assign(r,n),r},gl=async(e,t)=>{let r={...e,body:await Uo(e.body,t)},o=Lo(e,r.body);switch(o){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Tl(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Il(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await Cl(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Fo(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Sc(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await Ol(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await $o(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await wc(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await _c(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Rc(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await vl(r,t);default:let n=r.body;return Mo({output:e,parsedBody:n,errorCode:o})}},Sl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return wl(e,t);let r=R({$metadata:N(e)}),o=le(Ue(await $r(e.body,t)),"body"),n=T(o,{authorizationEndpoint:y,clientId:y,clientIdIssuedAt:sr,clientSecret:y,clientSecretExpiresAt:sr,tokenEndpoint:y});return Object.assign(r,n),r},wl=async(e,t)=>{let r={...e,body:await Uo(e.body,t)},o=Lo(e,r.body);switch(o){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Fo(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await Al(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await $o(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await wc(r,t);default:let n=r.body;return Mo({output:e,parsedBody:n,errorCode:o})}},_l=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Rl(e,t);let r=R({$metadata:N(e)}),o=le(Ue(await $r(e.body,t)),"body"),n=T(o,{deviceCode:y,expiresIn:ir,interval:ir,userCode:y,verificationUri:y,verificationUriComplete:y});return Object.assign(r,n),r},Rl=async(e,t)=>{let r={...e,body:await Uo(e.body,t)},o=Lo(e,r.body);switch(o){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Fo(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Sc(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await $o(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await _c(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Rc(r,t);default:let n=r.body;return Mo({output:e,parsedBody:n,errorCode:o})}},Mo=ar(P),Tl=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new ol({$metadata:N(e),...r});return A(s,e.body)},Il=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new nl({$metadata:N(e),...r});return A(s,e.body)},Cl=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new sl({$metadata:N(e),...r});return A(s,e.body)},Fo=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new il({$metadata:N(e),...r});return A(s,e.body)},Sc=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new al({$metadata:N(e),...r});return A(s,e.body)},Al=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new fl({$metadata:N(e),...r});return A(s,e.body)},Ol=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new cl({$metadata:N(e),...r});return A(s,e.body)},$o=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new dl({$metadata:N(e),...r});return A(s,e.body)},wc=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new pl({$metadata:N(e),...r});return A(s,e.body)},_c=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new ll({$metadata:N(e),...r});return A(s,e.body)},Rc=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new ml({$metadata:N(e),...r});return A(s,e.body)},vl=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:y,error_description:y});Object.assign(r,n);let s=new ul({$metadata:N(e),...r});return A(s,e.body)},N=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),bl=(e,t)=>or(e,t).then(r=>t.utf8Encoder(r)),$r=(e,t)=>bl(e,t).then(r=>r.length?JSON.parse(r):{}),Uo=async(e,t)=>{let r=await $r(e,t);return r.message=r.message??r.Message,r},Lo=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),o=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)},ft=class extends j{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,o){this.middlewareStack.use(se(r,this.serialize,this.deserialize)),this.middlewareStack.use(ie(r,_CreateTokenCommand.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f,[F]:{service:"AWSSSOOIDCService",operation:"CreateToken"}},{requestHandler:p}=r;return n.resolve(f=>p.handle(f.request,o||{}),c)}serialize(t,r){return hl(t,r)}deserialize(t,r){return yl(t,r)}},bo=class extends j{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,o){this.middlewareStack.use(se(r,this.serialize,this.deserialize)),this.middlewareStack.use(ie(r,_RegisterClientCommand.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f,[F]:{service:"AWSSSOOIDCService",operation:"RegisterClient"}},{requestHandler:p}=r;return n.resolve(f=>p.handle(f.request,o||{}),c)}serialize(t,r){return El(t,r)}deserialize(t,r){return Sl(t,r)}},No=class extends j{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,o){this.middlewareStack.use(se(r,this.serialize,this.deserialize)),this.middlewareStack.use(ie(r,_StartDeviceAuthorizationCommand.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f,[F]:{service:"AWSSSOOIDCService",operation:"StartDeviceAuthorization"}},{requestHandler:p}=r;return n.resolve(f=>p.handle(f.request,o||{}),c)}serialize(t,r){return xl(t,r)}deserialize(t,r){return _l(t,r)}},Nl={CreateTokenCommand:ft,RegisterClientCommand:bo,StartDeviceAuthorizationCommand:No},Dl=class extends ko{};Mi(Nl,Dl);v();he();var We="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var Ho={},Tc=e=>{if(Ho[e])return Ho[e];let t=new ko({region:e});return Ho[e]=t,t};var Ic=(e,t)=>Tc(t).send(new ft({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));v();var zo=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new M(`Token is expired. ${We}`,!1)};v();var fe=(e,t,r=!1)=>{if(typeof t>"u")throw new M(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${We}`,!1)};he();var Cc=require("fs"),{writeFile:Pl}=Cc.promises,Ac=(e,t)=>{let r=xt(e),o=JSON.stringify(t,null,2);return Pl(r,o)};var Oc=new Date(0),vc=(e={})=>async()=>{let t=await _t(e),r=_e(e),o=t[r];if(o){if(!o.sso_session)throw new M(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new M(`Profile '${r}' could not be found in shared credentials file.`,!1);let n=o.sso_session,i=(await wt(e))[n];if(!i)throw new M(`Sso session '${n}' could not be found in shared credentials file.`,!1);for(let m of["sso_start_url","sso_region"])if(!i[m])throw new M(`Sso session '${n}' is missing required property '${m}'.`,!1);let a=i.sso_start_url,c=i.sso_region,p;try{p=await yt(n)}catch{throw new M(`The SSO session token associated with profile=${r} was not found or is invalid. ${We}`,!1)}fe("accessToken",p.accessToken),fe("expiresAt",p.expiresAt);let{accessToken:f,expiresAt:l}=p,u={token:f,expiration:new Date(l)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-Oc.getTime()<30*1e3)return zo(u),u;fe("clientId",p.clientId,!0),fe("clientSecret",p.clientSecret,!0),fe("refreshToken",p.refreshToken,!0);try{Oc.setTime(Date.now());let m=await Ic(p,c);fe("accessToken",m.accessToken),fe("expiresIn",m.expiresIn);let h=new Date(Date.now()+m.expiresIn*1e3);try{await Ac(n,{...p,accessToken:m.accessToken,expiresAt:h.toISOString(),refreshToken:m.refreshToken})}catch{}return{token:m.accessToken,expiration:h}}catch{return zo(u),u}};v();he();var ht=!1,qo=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:s,profile:i})=>{var g;let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let w=await vc({profile:i})();a={accessToken:w.token,expiresAt:new Date(w.expiration).toISOString()}}catch(w){throw new S(w.message,ht)}else try{a=await yt(e)}catch{throw new S(`The SSO session associated with this profile is invalid. ${c}`,ht)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new S(`The SSO session associated with this profile has expired. ${c}`,ht);let{accessToken:p}=a,f=s||new br({region:o}),l;try{l=await f.send(new Mr({accountId:r,roleName:n,accessToken:p}))}catch(w){throw S.from(w,ht)}let{roleCredentials:{accessKeyId:u,secretAccessKey:m,sessionToken:h,expiration:x}={}}=l,E=(g=l==null?void 0:l.roleCredentials)==null?void 0:g.credentialScope;if(!u||!m||!h||!x)throw new S("SSO returns an invalid temporary credential.",ht);return{accessKeyId:u,secretAccessKey:m,sessionToken:h,expiration:new Date(x),credentialScope:E}};v();var bc=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:o,sso_role_name:n}=e;if(!t||!r||!o||!n)throw new S(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var Nc=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:s,ssoSession:i}=e,a=_e(e);if(!t&&!r&&!o&&!n&&!i){let p=(await _t(e))[a];if(!p)throw new S(`Profile ${a} was not found.`);if(!Rs(p))throw new S(`Profile ${a} is not configured with SSO credentials.`);if(p!=null&&p.sso_session){let E=(await wt(e))[p.sso_session],g=` configurations in profile ${a} and sso-session ${p.sso_session}`;if(o&&o!==E.sso_region)throw new S("Conflicting SSO region"+g,!1);if(t&&t!==E.sso_start_url)throw new S("Conflicting SSO start_url"+g,!1);p.sso_region=E.sso_region,p.sso_start_url=E.sso_start_url}let{sso_start_url:f,sso_account_id:l,sso_region:u,sso_role_name:m,sso_session:h}=bc(p);return qo({ssoStartUrl:f,ssoSession:h,ssoAccountId:l,ssoRegion:u,ssoRoleName:m,ssoClient:s,profile:a})}else{if(!t||!r||!o||!n)throw new S('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return qo({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:s,profile:a})}};var Pc=require("@smithy/node-http-handler"),Ml=async e=>new Dc.DynamoDB({region:"eu-west-1",credentials:(e==null?void 0:e.credentials)||await Nc({profile:"prod"})(),maxAttempts:6,retryMode:"adaptive",requestHandler:new Pc.NodeHttpHandler({requestTimeout:1e8,connectionTimeout:2e4})}),kc=Ml;var Mc=Hr(require("fs"),1),Fc=async(e,t)=>{await Mc.default.appendFile(e,t,r=>{console.error(r)})};var Fl=async()=>{var t;Se.Logger.Progress();let e=new Se.default({client:await kc({}),startSegment:0,totalSegments:1e6,batchSize:500});Se.Logger.initialProgress=e.batchIdx/e.totalSegments*100,Se.Logger.logBeforeExit(e.logStats.bind(e));try{let r=e.scan({scanOptions:{TableName:process.env.TABLE,FilterExpression:"attribute_not_exists(#data)",ExpressionAttributeNames:{"#data":"data","#uuid":"uuid"},ProjectionExpression:"#uuid",Select:"SPECIFIC_ATTRIBUTES"}});for await(let o of r)Se.Logger.progress=e.progress,Fc("out/user_data_test.txt",(t=o.Items)==null?void 0:t.reduce((n,s)=>{var i,a;return(i=s==null?void 0:s.uuid)!=null&&i.S?`${n}${(a=s.uuid)==null?void 0:a.S}\r
`:n},""))}catch(r){e.logStats(),console.error(r),process.exit(1)}};Fl();
