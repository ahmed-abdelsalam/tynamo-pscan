"use strict";var zc=Object.create;var Hr=Object.defineProperty;var qc=Object.getOwnPropertyDescriptor;var Bc=Object.getOwnPropertyNames;var Gc=Object.getPrototypeOf,jc=Object.prototype.hasOwnProperty;var d=(e,t)=>()=>(e&&(t=e(e=0)),t);var Vc=(e,t)=>{for(var r in t)Hr(e,r,{get:t[r],enumerable:!0})},Wc=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Bc(t))!jc.call(e,n)&&n!==r&&Hr(e,n,{get:()=>t[n],enumerable:!(o=qc(t,n))||o.enumerable});return e};var Bo=(e,t,r)=>(r=e!=null?zc(Gc(e)):{},Wc(t||!e||!e.__esModule?Hr(r,"default",{value:e,enumerable:!0}):r,e));var M,Xe=d(()=>{"use strict";M=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}});var S,Go=d(()=>{"use strict";Xe();S=class e extends M{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}}});var k,jo=d(()=>{"use strict";Xe();k=class e extends M{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}}});var Vo,Wo=d(()=>{"use strict";Xe();Vo=(...e)=>async()=>{if(e.length===0)throw new M("No providers in chain");let t;for(let r of e)try{return await r()}catch(o){if(t=o,o!=null&&o.tryNextLink)continue;throw o}throw t}});var Yo,Ko=d(()=>{"use strict";Yo=e=>()=>Promise.resolve(e)});var Et,Xo=d(()=>{"use strict";Et=(e,t,r)=>{let o,n,s,i=!1,a=async()=>{n||(n=e());try{o=await n,s=!0,i=!1}finally{n=void 0}return o};return t===void 0?async c=>((!s||c!=null&&c.forceRefresh)&&(o=await a()),o):async c=>((!s||c!=null&&c.forceRefresh)&&(o=await a()),i?o:r&&!r(o)?(i=!0,o):(t(o)&&await a(),o))}});var O=d(()=>{"use strict";Go();Xe();jo();Wo();Ko();Xo()});var Jo,Qo,zr,Yc,we,Je=d(()=>{"use strict";Jo=require("os"),Qo=require("path"),zr={},Yc=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",we=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:o=`C:${Qo.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${o}${r}`;let n=Yc();return zr[n]||(zr[n]=(0,Jo.homedir)()),zr[n]}});var Kc,Xc,_e,Zo=d(()=>{"use strict";Kc="AWS_PROFILE",Xc="default",_e=e=>e.profile||process.env[Kc]||Xc});var en,tn,gt,qr=d(()=>{"use strict";en=require("crypto"),tn=require("path");Je();gt=e=>{let r=(0,en.createHash)("sha1").update(e).digest("hex");return(0,tn.join)(we(),".aws","sso","cache",`${r}.json`)}});var rn,Jc,yt,on=d(()=>{"use strict";rn=require("fs");qr();({readFile:Jc}=rn.promises),yt=async e=>{let t=gt(e),r=await Jc(t,"utf8");return JSON.parse(r)}});var nn=d(()=>{"use strict"});var sn,an=d(()=>{"use strict";(function(e){e.HEADER="header",e.QUERY="query"})(sn||(sn={}))});var Br,cn=d(()=>{"use strict";(function(e){e.HEADER="header",e.QUERY="query"})(Br||(Br={}))});var dn=d(()=>{"use strict"});var pn=d(()=>{"use strict"});var ln=d(()=>{"use strict"});var mn=d(()=>{"use strict"});var un=d(()=>{"use strict";an();cn();dn();pn();ln();mn()});var fn=d(()=>{"use strict"});var hn=d(()=>{"use strict"});var xn=d(()=>{"use strict"});var En=d(()=>{"use strict"});var gn=d(()=>{"use strict"});var yn=d(()=>{"use strict"});var Sn=d(()=>{"use strict"});var wn=d(()=>{"use strict";gn();yn();Sn()});var _n=d(()=>{"use strict"});var Rn=d(()=>{"use strict"});var Re,Tn=d(()=>{"use strict";(function(e){e.HTTP="http",e.HTTPS="https"})(Re||(Re={}))});var In=d(()=>{"use strict"});var Cn=d(()=>{"use strict"});var An=d(()=>{"use strict"});var bn=d(()=>{"use strict"});var On=d(()=>{"use strict"});var vn=d(()=>{"use strict";In();Cn();An();bn();On()});var Nn=d(()=>{"use strict"});var Te,Gr=d(()=>{"use strict";(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Te||(Te={}))});var Pn=d(()=>{"use strict";Gr()});var Dn=d(()=>{"use strict"});var Mn=d(()=>{"use strict";Pn();Dn();Gr()});var jr,kn=d(()=>{"use strict";(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(jr||(jr={}))});var Fn=d(()=>{"use strict"});var $n=d(()=>{"use strict"});var Un=d(()=>{"use strict"});var Ln=d(()=>{"use strict"});var Hn=d(()=>{"use strict"});var zn=d(()=>{"use strict";$n();Un();Ln();Hn()});var qn=d(()=>{"use strict"});var F,Bn=d(()=>{"use strict";F="__smithy_context"});var Gn=d(()=>{"use strict"});var X,jn=d(()=>{"use strict";(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(X||(X={}))});var Vn=d(()=>{"use strict"});var Wn=d(()=>{"use strict"});var Yn=d(()=>{"use strict"});var Kn=d(()=>{"use strict"});var Xn=d(()=>{"use strict"});var Jn=d(()=>{"use strict"});var Qn=d(()=>{"use strict"});var Zn=d(()=>{"use strict"});var es=d(()=>{"use strict"});var ts,rs=d(()=>{"use strict";(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ts||(ts={}))});var os=d(()=>{"use strict"});var ns=d(()=>{"use strict"});var ss=d(()=>{"use strict"});var is=d(()=>{"use strict"});var as=d(()=>{"use strict"});var cs=d(()=>{"use strict"});var v=d(()=>{"use strict";nn();un();fn();hn();xn();En();wn();_n();Rn();Tn();vn();Nn();Mn();kn();Fn();zn();qn();Bn();Gn();jn();Vn();Wn();Yn();Kn();Xn();Jn();Qn();Zn();es();rs();os();ns();ss();is();as();cs()});var ds,ps=d(()=>{"use strict";v();Ie();ds=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf($);return r===-1?!1:Object.values(X).includes(t.substring(0,r))}).reduce((t,[r,o])=>{let n=r.indexOf($),s=r.substring(0,n)===X.PROFILE?r.substring(n+1):r;return t[s]=o,t},{...e.default&&{default:e.default}})});var ls,Qc,St,Vr=d(()=>{"use strict";ls=require("path");Je();Qc="AWS_CONFIG_FILE",St=()=>process.env[Qc]||(0,ls.join)(we(),".aws","config")});var ms,Zc,us,fs=d(()=>{"use strict";ms=require("path");Je();Zc="AWS_SHARED_CREDENTIALS_FILE",us=()=>process.env[Zc]||(0,ms.join)(we(),".aws","credentials")});var ed,td,Qe,Wr=d(()=>{"use strict";v();Ie();ed=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,td=["__proto__","profile __proto__"],Qe=e=>{let t={},r,o;for(let n of e.split(/\r?\n/)){let s=n.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,o=void 0;let a=s.substring(1,s.length-1),c=ed.exec(a);if(c){let[,p,,f]=c;Object.values(X).includes(p)&&(r=[p,f].join($))}else r=a;if(td.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[c,p]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(p==="")o=c;else{o&&n.trimStart()===n&&(o=void 0),t[r]=t[r]||{};let f=o?[o,c].join($):c;t[r][f]=p}}}}return t}});var hs,rd,Yr,Ze,Kr=d(()=>{"use strict";hs=require("fs"),{readFile:rd}=hs.promises,Yr={},Ze=(e,t)=>((!Yr[e]||t!=null&&t.ignoreCache)&&(Yr[e]=rd(e,"utf8")),Yr[e])});var xs,$,wt,Ie=d(()=>{"use strict";ps();Vr();fs();Wr();Kr();xs=()=>({}),$=".",wt=async(e={})=>{let{filepath:t=us(),configFilepath:r=St()}=e,o=await Promise.all([Ze(r,{ignoreCache:e.ignoreCache}).then(Qe).then(ds).catch(xs),Ze(t,{ignoreCache:e.ignoreCache}).then(Qe).catch(xs)]);return{configFile:o[0],credentialsFile:o[1]}}});var Es,gs=d(()=>{"use strict";v();Ie();Es=e=>Object.entries(e).filter(([t])=>t.startsWith(X.SSO_SESSION+$)).reduce((t,[r,o])=>({...t,[r.split($)[1]]:o}),{})});var od,_t,ys=d(()=>{"use strict";Vr();gs();Wr();Kr();od=()=>({}),_t=async(e={})=>Ze(e.configFilepath??St()).then(Qe).then(Es).catch(od)});var Ss,ws=d(()=>{"use strict";Ss=(...e)=>{let t={};for(let r of e)for(let[o,n]of Object.entries(r))t[o]!==void 0?Object.assign(t[o],n):t[o]=n;return t}});var Rt,_s=d(()=>{"use strict";Ie();ws();Rt=async e=>{let t=await wt(e);return Ss(t.configFile,t.credentialsFile)}});var Rs=d(()=>{"use strict"});var xe=d(()=>{"use strict";Je();Zo();qr();on();Ie();ys();_s();Rs()});var Js,Qs=d(()=>{"use strict";O();Js=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new S(t.message||`Cannot load config from environment variables with getter: ${e}`)}}});var Zs,ei=d(()=>{"use strict";O();xe();Zs=(e,{preferredFile:t="config",...r}={})=>async()=>{let o=_e(r),{configFile:n,credentialsFile:s}=await wt(r),i=s[o]||{},a=n[o]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let f=e(c,t==="config"?n:s);if(f===void 0)throw new Error;return f}catch(p){throw new S(p.message||`Cannot load config for profile ${o} in SDK configuration files with getter: ${e}`)}}});var Md,ti,ri=d(()=>{"use strict";O();Md=e=>typeof e=="function",ti=e=>Md(e)?async()=>await e():Yo(e)});var I,oi=d(()=>{"use strict";O();Qs();ei();ri();I=({environmentVariableSelector:e,configFileSelector:t,default:r},o={})=>Et(Vo(Js(e),Zs(t,o),ti(r)))});var se=d(()=>{"use strict";oi()});function ci(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[o,n=null]=r.split("=");o=decodeURIComponent(o),n&&(n=decodeURIComponent(n)),o in t?Array.isArray(t[o])?t[o].push(n):t[o]=[t[o],n]:t[o]=n}return t}var di=d(()=>{"use strict"});var K,st=d(()=>{"use strict";di();K=e=>{if(typeof e=="string")return K(new URL(e));let{hostname:t,pathname:r,port:o,protocol:n,search:s}=e,i;return s&&(i=ci(s)),{hostname:t,port:o?parseInt(o):void 0,protocol:n,path:r,query:i}}});function ue(e){return new Promise((t,r)=>{var n;let o=(0,Ra.request)({method:"GET",...e,hostname:(n=e.hostname)==null?void 0:n.replace(/^\[(.+)\]$/,"$1")});o.on("error",s=>{r(Object.assign(new M("Unable to connect to instance metadata service"),s)),o.destroy()}),o.on("timeout",()=>{r(new M("TimeoutError from instance metadata service")),o.destroy()}),o.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new M("Error response received from instance metadata service"),{statusCode:i})),o.destroy());let a=[];s.on("data",c=>{a.push(c)}),s.on("end",()=>{t(_a.Buffer.concat(a)),o.destroy()})}),o.end()})}var _a,Ra,yr=d(()=>{"use strict";O();_a=require("buffer"),Ra=require("http")});var Sr,wr,wo=d(()=>{"use strict";Sr=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",wr=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)})});var eI,tI,pt,_r=d(()=>{"use strict";eI=1e3,tI=0,pt=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t})});var lt,_o=d(()=>{"use strict";lt=(e,t)=>{let r=e();for(let o=0;o<t;o++)r=r.catch(e);return r}});var Ta,Rr,Tr,Ro,up,fp,hp,xp,Ep,gp,Ia=d(()=>{"use strict";O();Ta=require("url");yr();wo();_r();_o();Rr="AWS_CONTAINER_CREDENTIALS_FULL_URI",Tr="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Ro="AWS_CONTAINER_AUTHORIZATION_TOKEN",up=(e={})=>{let{timeout:t,maxRetries:r}=pt(e);return()=>lt(async()=>{let o=await gp(),n=JSON.parse(await fp(t,o));if(!Sr(n))throw new S("Invalid response received from instance metadata service.");return wr(n)},r)},fp=async(e,t)=>(process.env[Ro]&&(t.headers={...t.headers,Authorization:process.env[Ro]}),(await ue({...t,timeout:e})).toString()),hp="169.254.170.2",xp={localhost:!0,"127.0.0.1":!0},Ep={"http:":!0,"https:":!0},gp=async()=>{if(process.env[Tr])return{hostname:hp,path:process.env[Tr]};if(process.env[Rr]){let e=(0,Ta.parse)(process.env[Rr]);if(!e.hostname||!(e.hostname in xp))throw new S(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in Ep))throw new S(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new S(`The container metadata credential provider cannot be used unless the ${Tr} or ${Rr} environment variable is set`,!1)}});var Ir,Ca=d(()=>{"use strict";O();Ir=class e extends S{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,e.prototype)}}});var mt,Aa=d(()=>{"use strict";(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(mt||(mt={}))});var yp,Sp,ba,Oa=d(()=>{"use strict";yp="AWS_EC2_METADATA_SERVICE_ENDPOINT",Sp="ec2_metadata_service_endpoint",ba={environmentVariableSelector:e=>e[yp],configFileSelector:e=>e[Sp],default:void 0}});var fe,To=d(()=>{"use strict";(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(fe||(fe={}))});var wp,_p,va,Na=d(()=>{"use strict";To();wp="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",_p="ec2_metadata_service_endpoint_mode",va={environmentVariableSelector:e=>e[wp],configFileSelector:e=>e[_p],default:fe.IPv4}});var Cr,Rp,Tp,Io=d(()=>{"use strict";se();st();Aa();Oa();To();Na();Cr=async()=>K(await Rp()||await Tp()),Rp=async()=>I(ba)(),Tp=async()=>{let e=await I(va)();switch(e){case fe.IPv4:return mt.IPv4;case fe.IPv6:return mt.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(fe)}`)}}});var Ip,Co,Pa=d(()=>{"use strict";Ip="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Co=(e,t)=>{let r=300+Math.floor(Math.random()*300),o=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+Ip);let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:o}}});var Da,Ma=d(()=>{"use strict";Pa();Da=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,o;return async()=>{let n;try{n=await e(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=Co(n,r))}catch(s){if(o)r.warn("Credential renew failed: ",s),n=Co(o,r);else throw s}return o=n,n}}});var $a,Cp,Ao,ka,Fa,Ap,bp,Op,vp,Np,Ua=d(()=>{"use strict";se();O();Ca();yr();wo();_r();_o();Io();Ma();$a="/latest/meta-data/iam/security-credentials/",Cp="/latest/api/token",Ao="AWS_EC2_METADATA_V1_DISABLED",ka="ec2_metadata_v1_disabled",Fa="x-aws-ec2-metadata-token",Ap=(e={})=>Da(bp(e),{logger:e.logger}),bp=e=>{let t=!1,{logger:r,profile:o}=e,{timeout:n,maxRetries:s}=pt(e),i=async(a,c)=>{var l;if(t||((l=c.headers)==null?void 0:l[Fa])==null){let u=!1,m=!1,h=await I({environmentVariableSelector:E=>{let x=E[Ao];if(m=!!x&&x!=="false",x===void 0)throw new S(`${Ao} not set in env, checking config file next.`);return m},configFileSelector:E=>{let x=E[ka];return u=!!x&&x!=="false",u},default:!1},{profile:o})();if(e.ec2MetadataV1Disabled||h){let E=[];throw e.ec2MetadataV1Disabled&&E.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),u&&E.push(`config file profile (${ka})`),m&&E.push(`process environment variable (${Ao})`),new Ir(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${E.join(", ")}].`)}}let f=(await lt(async()=>{let u;try{u=await vp(c)}catch(m){throw m.statusCode===401&&(t=!1),m}return u},a)).trim();return lt(async()=>{let u;try{u=await Np(f,c)}catch(m){throw m.statusCode===401&&(t=!1),m}return u},a)};return async()=>{let a=await Cr();if(t)return r==null||r.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:n});{let c;try{c=(await Op({...a,timeout:n})).toString()}catch(p){if((p==null?void 0:p.statusCode)===400)throw Object.assign(p,{message:"EC2 Metadata token request returned error"});return(p.message==="TimeoutError"||[403,404,405].includes(p.statusCode))&&(t=!0),r==null||r.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:n})}return i(s,{...a,headers:{[Fa]:c},timeout:n})}}},Op=async e=>ue({...e,path:Cp,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),vp=async e=>(await ue({...e,path:$a})).toString(),Np=async(e,t)=>{let r=JSON.parse((await ue({...t,path:$a+e})).toString());if(!Sr(r))throw new S("Invalid response received from instance metadata service.");return wr(r)}});var La=d(()=>{"use strict"});var Ha={};Vc(Ha,{DEFAULT_MAX_RETRIES:()=>tI,DEFAULT_TIMEOUT:()=>eI,ENV_CMDS_AUTH_TOKEN:()=>Ro,ENV_CMDS_FULL_URI:()=>Rr,ENV_CMDS_RELATIVE_URI:()=>Tr,fromContainerMetadata:()=>up,fromInstanceMetadata:()=>Ap,getInstanceMetadataEndpoint:()=>Cr,httpRequest:()=>ue,providerConfigFromInit:()=>pt});var za=d(()=>{"use strict";Ia();Ua();_r();La();yr();Io()});var Dc=require("@aws-sdk/client-dynamodb");O();xe();var Ts=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var Tt=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,o){t.updateHttpClientConfig(r,o)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},It=e=>({httpHandler:e.httpHandler()});v();var C=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=nd(t.query)),t}};function nd(e){return Object.keys(e).reduce((t,r)=>{let o=e[r];return{...t,[r]:Array.isArray(o)?[...o]:o}},{})}var et=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var sd=e=>t=>async r=>{if(!C.isInstance(r.request))return t(r);let{request:o}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!o.headers[":authority"])delete o.headers.host,o.headers[":authority"]=o.hostname+(o.port?":"+o.port:"");else if(!o.headers.host){let s=o.hostname;o.port!=null&&(s+=`:${o.port}`),o.headers.host=s}return t(r)},id={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ct=e=>({applyToStack:t=>{t.add(sd(e),id)}});var ad=()=>(e,t)=>async r=>{var o,n;try{let s=await e(r),{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:p={}}=t,{overrideInputFilterSensitiveLog:f,overrideOutputFilterSensitiveLog:l}=p,u=f??t.inputFilterSensitiveLog,m=l??t.outputFilterSensitiveLog,{$metadata:h,...E}=s.output;return(o=c==null?void 0:c.info)==null||o.call(c,{clientName:i,commandName:a,input:u(r.input),output:m(E),metadata:h}),s}catch(s){let{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:p={}}=t,{overrideInputFilterSensitiveLog:f}=p,l=f??t.inputFilterSensitiveLog;throw(n=c==null?void 0:c.error)==null||n.call(c,{clientName:i,commandName:a,input:l(r.input),error:s,metadata:s.$metadata}),s}},cd={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},At=e=>({applyToStack:t=>{t.add(ad(),cd)}});var Is="X-Amzn-Trace-Id",dd="AWS_LAMBDA_FUNCTION_NAME",pd="_X_AMZN_TRACE_ID",ld=e=>t=>async r=>{let{request:o}=r;if(!C.isInstance(o)||e.runtime!=="node"||o.headers.hasOwnProperty(Is))return t(r);let n=process.env[dd],s=process.env[pd],i=a=>typeof a=="string"&&a.length>0;return i(n)&&i(s)&&(o.headers[Is]=s),t({...r,request:o})},md={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},bt=e=>({applyToStack:t=>{t.add(ld(e),md)}});function Ot(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var ud=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),tt=e=>ud.test(e)||e.startsWith("[")&&e.endsWith("]");var fd=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),rt=(e,t=!1)=>{if(!t)return fd.test(e);let r=e.split(".");for(let o of r)if(!rt(o))return!1;return!0};var ot={};var J="endpoints";function U(e){return typeof e!="object"||e==null?e:"ref"in e?`$${U(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(U).join(", ")})`:JSON.stringify(e,null,2)}var _=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Cs=(e,t)=>e===t;var As=e=>{let t=e.split("."),r=[];for(let o of t){let n=o.indexOf("[");if(n!==-1){if(o.indexOf("]")!==o.length-1)throw new _(`Path: '${e}' does not end with ']'`);let s=o.slice(n+1,-1);if(Number.isNaN(parseInt(s)))throw new _(`Invalid array index: '${s}' in path: '${e}'`);n!==0&&r.push(o.slice(0,n)),r.push(s)}else r.push(o)}return r};var vt=(e,t)=>As(t).reduce((r,o)=>{if(typeof r!="object")throw new _(`Index '${o}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(o)]:r[o]},e);var bs=e=>e!=null;var Os=e=>!e;v();var Xr={[Re.HTTP]:80,[Re.HTTPS]:443},vs=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:u,port:m,protocol:h="",path:E="",query:x={}}=e,y=new URL(`${h}//${u}${m?`:${m}`:""}${E}`);return y.search=Object.entries(x).map(([w,G])=>`${w}=${G}`).join("&"),y}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:o,hostname:n,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(Re).includes(c))return null;let p=tt(n),f=r.includes(`${o}:${Xr[c]}`)||typeof e=="string"&&e.includes(`${o}:${Xr[c]}`),l=`${o}${f?`:${Xr[c]}`:""}`;return{scheme:c,authority:l,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:p}};var Ns=(e,t)=>e===t;var Ps=(e,t,r,o)=>t>=r||e.length<r?null:o?e.substring(e.length-r,e.length-t):e.substring(t,r);var Ds=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var Ms={booleanEquals:Cs,getAttr:vt,isSet:bs,isValidHostLabel:rt,not:Os,parseURL:vs,stringEquals:Ns,substring:Ps,uriEncode:Ds};var Nt=(e,t)=>{let r=[],o={...t.endpointParams,...t.referenceRecord},n=0;for(;n<e.length;){let s=e.indexOf("{",n);if(s===-1){r.push(e.slice(n));break}r.push(e.slice(n,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),n=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,p]=a.split("#");r.push(vt(o[c],p))}else r.push(o[a]);n=i+1}return r.join("")};var ks=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var oe=(e,t,r)=>{if(typeof e=="string")return Nt(e,r);if(e.fn)return Pt(e,r);if(e.ref)return ks(e,r);throw new _(`'${t}': ${String(e)} is not a string, function or reference.`)};var Pt=({fn:e,argv:t},r)=>{let o=t.map(s=>["boolean","number"].includes(typeof s)?s:oe(s,"arg",r)),n=e.split(".");return n[0]in ot&&n[1]!=null?ot[n[0]][n[1]](...o):Ms[e](...o)};var Fs=({assign:e,...t},r)=>{var n,s;if(e&&e in r.referenceRecord)throw new _(`'${e}' is already defined in Reference Record.`);let o=Pt(t,r);return(s=(n=r.logger)==null?void 0:n.debug)==null||s.call(n,J,`evaluateCondition: ${U(t)} = ${U(o)}`),{result:o===""?!0:!!o,...e!=null&&{toAssign:{name:e,value:o}}}};var Ce=(e=[],t)=>{var o,n;let r={};for(let s of e){let{result:i,toAssign:a}=Fs(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(n=(o=t.logger)==null?void 0:o.debug)==null||n.call(o,J,`assign: ${a.name} := ${U(a.value)}`))}return{result:!0,referenceRecord:r}};var $s=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:n.map(s=>{let i=oe(s,"Header value entry",t);if(typeof i!="string")throw new _(`Header '${o}' value '${i}' is not a string`);return i})}),{});var Jr=(e,t)=>{if(Array.isArray(e))return e.map(r=>Jr(r,t));switch(typeof e){case"string":return Nt(e,t);case"object":if(e===null)throw new _(`Unexpected endpoint property: ${e}`);return Dt(e,t);case"boolean":return e;default:throw new _(`Unexpected endpoint property type: ${typeof e}`)}};var Dt=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:Jr(n,t)}),{});var Us=(e,t)=>{let r=oe(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(o){throw console.error(`Failed to construct URL with ${r}`,o),o}throw new _(`Endpoint URL must be a string, got ${typeof r}`)};var Ls=(e,t)=>{var f,l;let{conditions:r,endpoint:o}=e,{result:n,referenceRecord:s}=Ce(r,t);if(!n)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:p}=o;return(l=(f=t.logger)==null?void 0:f.debug)==null||l.call(f,J,`Resolving endpoint from template: ${U(o)}`),{...p!=null&&{headers:$s(p,i)},...c!=null&&{properties:Dt(c,i)},url:Us(a,i)}};var Hs=(e,t)=>{let{conditions:r,error:o}=e,{result:n,referenceRecord:s}=Ce(r,t);if(n)throw new _(oe(o,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var zs=(e,t)=>{let{conditions:r,rules:o}=e,{result:n,referenceRecord:s}=Ce(r,t);if(n)return Mt(o,{...t,referenceRecord:{...t.referenceRecord,...s}})};var Mt=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let o=Ls(r,t);if(o)return o}else if(r.type==="error")Hs(r,t);else if(r.type==="tree"){let o=zs(r,t);if(o)return o}else throw new _(`Unknown endpoint rule: ${r}`);throw new _("Rules evaluation failed")};var nt=(e,t)=>{var p,f,l,u,m;let{endpointParams:r,logger:o}=t,{parameters:n,rules:s}=e;(f=(p=t.logger)==null?void 0:p.debug)==null||f.call(p,`${J} Initial EndpointParams: ${U(r)}`);let i=Object.entries(n).filter(([,h])=>h.default!=null).map(([h,E])=>[h,E.default]);if(i.length>0)for(let[h,E]of i)r[h]=r[h]??E;let a=Object.entries(n).filter(([,h])=>h.required).map(([h])=>h);for(let h of a)if(r[h]==null)throw new _(`Missing required parameter: '${h}'`);let c=Mt(s,{endpointParams:r,logger:o,referenceRecord:{}});if((l=t.endpointParams)!=null&&l.Endpoint)try{let h=new URL(t.endpointParams.Endpoint),{protocol:E,port:x}=h;c.url.protocol=E,c.url.port=x}catch{}return(m=(u=t.logger)==null?void 0:u.debug)==null||m.call(u,`${J} Resolved endpoint: ${U(c)}`),c};var Qr=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Qr(r))return!1;return!0}return!(!rt(e)||e.length<3||e.length>63||e!==e.toLowerCase()||tt(e))};var qs=e=>{let t=e.split(":");if(t.length<6)return null;let[r,o,n,s,i,...a]=t;return r!=="arn"||o===""||n===""||a[0]===""?null:{partition:o,service:n,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var Bs={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var xd=Bs,Ed="",Gs=e=>{let{partitions:t}=xd;for(let o of t){let{regions:n,outputs:s}=o;for(let[i,a]of Object.entries(n))if(i===e)return{...s,...a}}for(let o of t){let{regionRegex:n,outputs:s}=o;if(new RegExp(n).test(e))return{...s}}let r=t.find(o=>o.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};var js=()=>Ed;var gd={isVirtualHostableS3Bucket:Qr,parseArn:qs,partition:Gs};ot.aws=gd;var Zr="user-agent",kt="x-amz-user-agent",eo=" ",Ft="/",Vs=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Ws=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,to="-";var yd=e=>(t,r)=>async o=>{var u,m;let{request:n}=o;if(!C.isInstance(n))return t(o);let{headers:s}=n,i=((u=r==null?void 0:r.userAgent)==null?void 0:u.map(ro))||[],a=(await e.defaultUserAgentProvider()).map(ro),c=((m=e==null?void 0:e.customUserAgent)==null?void 0:m.map(ro))||[],p=js(),f=(p?[p]:[]).concat([...a,...i,...c]).join(eo),l=[...a.filter(h=>h.startsWith("aws-sdk-")),...c].join(eo);return e.runtime!=="browser"?(l&&(s[kt]=s[kt]?`${s[Zr]} ${l}`:l),s[Zr]=f):s[kt]=f,t({...o,request:n})},ro=e=>{var i;let t=e[0].split(Ft).map(a=>a.replace(Vs,to)).join(Ft),r=(i=e[1])==null?void 0:i.replace(Ws,to),o=t.indexOf(Ft),n=t.substring(0,o),s=t.substring(o+1);return n==="api"&&(s=s.toLowerCase()),[n,s,r].filter(a=>a&&a.length>0).reduce((a,c,p)=>{switch(p){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},Sd={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},$t=e=>({applyToStack:t=>{t.add(yd(e),Sd)}});var Ae=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var ne;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(ne||(ne={}));var wd="AWS_USE_DUALSTACK_ENDPOINT",_d="use_dualstack_endpoint";var Ut={environmentVariableSelector:e=>Ae(e,wd,ne.ENV),configFileSelector:e=>Ae(e,_d,ne.CONFIG),default:!1};var Rd="AWS_USE_FIPS_ENDPOINT",Td="use_fips_endpoint";var Lt={environmentVariableSelector:e=>Ae(e,Rd,ne.ENV),configFileSelector:e=>Ae(e,Td,ne.CONFIG),default:!1};v();var Ht=e=>e[F]||(e[F]={});var Q=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Id="AWS_REGION",Cd="region",be={environmentVariableSelector:e=>e[Id],configFileSelector:e=>e[Cd],default:()=>{throw new Error("Region is missing")}},zt={preferredFile:"credentials"};var qt=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var oo=e=>qt(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var Bt=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return oo(t);let o=await t();return oo(o)},useFipsEndpoint:async()=>{let o=typeof t=="string"?t:await t();return qt(o)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var Ys="content-length";function Ad(e){return t=>async r=>{let o=r.request;if(C.isInstance(o)){let{body:n,headers:s}=o;if(n&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Ys)===-1)try{let i=e(n);o.headers={...o.headers,[Ys]:String(i)}}catch{}}return t({...r,request:o})}}var bd={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Gt=e=>({applyToStack:t=>{t.add(Ad(e.bodyLengthChecker),bd)}});var Ks=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Dd(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Pd(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Od=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,vd=/(\d+\.){3}\d+/,Nd=/\.\./;var Pd=e=>Od.test(e)&&!vd.test(e)&&!Nd.test(e),Dd=e=>{let[t,r,o,n,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,o,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!o&&!!s&&!!i};var Xs=(e,t,r)=>{let o=async()=>{let n=r[e]??r[t];return typeof n=="function"?n():n};return e==="credentialScope"||t==="CredentialScope"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return(n==null?void 0:n.credentialScope)??(n==null?void 0:n.CredentialScope)}:e==="endpoint"||t==="endpoint"?async()=>{let n=await o();if(n&&typeof n=="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:s,hostname:i,port:a,path:c}=n;return`${s}//${i}${a?":"+a:""}${c}`}}return n}:o};se();xe();var ni="AWS_ENDPOINT_URL",si="endpoint_url",ii=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),o=t[[ni,...r].join("_")];if(o)return o;let n=t[ni];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join($)];if(n){let s=e.split(" ").map(a=>a.toLowerCase()),i=n[[s.join("_"),si].join($)];if(i)return i}}let o=t[si];if(o)return o},default:void 0});var ai=async e=>I(ii(e))();st();var jt=e=>typeof e=="object"?"url"in e?K(e.url):e:K(e);var pi=async(e,t,r,o)=>{if(!r.endpoint){let i=await ai(r.serviceId||"");i&&(r.endpoint=()=>Promise.resolve(jt(i)))}let n=await kd(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,o)},kd=async(e,t,r)=>{var s;let o={},n=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,a]of Object.entries(n))switch(a.type){case"staticContextParams":o[i]=a.value;break;case"contextParams":o[i]=e[a.name];break;case"clientContextParams":case"builtInParams":o[i]=await Xs(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(n).length===0&&Object.assign(o,r),String(r.serviceId).toLowerCase()==="s3"&&await Ks(o),o};var li=({config:e,instructions:t})=>(r,o)=>async n=>{var a,c,p;let s=await pi(n.input,{getEndpointParameterInstructions(){return t}},{...e},o);o.endpointV2=s,o.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;let i=(c=o.authSchemes)==null?void 0:c[0];if(i){o.signing_region=i.signingRegion,o.signing_service=i.signingName;let f=Ht(o),l=(p=f==null?void 0:f.selectedHttpAuthScheme)==null?void 0:p.httpAuthOption;l&&(l.signingProperties=Object.assign(l.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...n})};var mi=(e,t)=>(r,o)=>async n=>{let{response:s}=await r(n);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var ui=(e,t)=>(r,o)=>async n=>{var a;let s=(a=o.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(o.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(n.input,{...e,endpoint:s});return r({...n,request:i})};var Fd={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},it={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function ie(e,t,r){return{applyToStack:o=>{o.add(mi(e,r),Fd),o.add(ui(e,t),it)}}}var no={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:it.name},ae=(e,t)=>({applyToStack:r=>{r.addRelativeTo(li({config:e,instructions:t}),no)}});var Vt=e=>{let t=e.tls??!0,{endpoint:r}=e,o=r!=null?async()=>jt(await Q(r)()):void 0;return{...e,endpoint:o,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Q(e.useDualstackEndpoint??!1),useFipsEndpoint:Q(e.useFipsEndpoint??!1)}};var j;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(j||(j={}));var Ee=3,Oe=j.STANDARD;var fi=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],hi=["TimeoutError","RequestTimeout","RequestTimeoutException"],xi=[500,502,503,504],Ei=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var ve=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||fi.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},Wt=e=>{var t;return hi.includes(e.name)||Ei.includes((e==null?void 0:e.code)||"")||xi.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},gi=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Wt(e)}return!1};var at=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(o=>setTimeout(o,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),ve(t)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let o=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(o)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let o=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(o*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Yt="amz-sdk-invocation-id",Kt="amz-sdk-request";var yi=()=>{let e=100;return{computeNextBackoffDelay:o=>Math.floor(Math.min(2e4,Math.random()*2**o*e)),setDelayBase:o=>{e=o}}};var so=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var ge=class{constructor(t){this.maxAttempts=t,this.mode=j.STANDARD,this.capacity=500,this.retryBackoffStrategy=yi(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return so({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let o=await this.getMaxAttempts();if(this.shouldRetry(t,r,o)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(n);return this.capacity-=a,so({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ee}`),Ee}}shouldRetry(t,r,o){return t.getRetryCount()+1<o&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Jt=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=j.ADAPTIVE;let{rateLimiter:o}=r??{};this.rateLimiter=o??new at,this.standardRetryStrategy=new ge(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Ti=Bo(require("crypto")),Zt=new Uint8Array(256),Qt=Zt.length;function ao(){return Qt>Zt.length-16&&(Ti.default.randomFillSync(Zt),Qt=0),Zt.slice(Qt,Qt+=16)}var Ii=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $d(e){return typeof e=="string"&&Ii.test(e)}var Ci=$d;var b=[];for(let e=0;e<256;++e)b.push((e+256).toString(16).substr(1));function Ud(e,t=0){let r=(b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]).toLowerCase();if(!Ci(r))throw TypeError("Stringified UUID is invalid");return r}var Ai=Ud;function Ld(e,t,r){e=e||{};let o=e.random||(e.rng||ao)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=o[n];return t}return Ai(o)}var co=Ld;var po=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var bi="AWS_MAX_ATTEMPTS",Oi="max_attempts",er={environmentVariableSelector:e=>{let t=e[bi];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${bi} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Oi];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Oi} mast be a number, got "${t}"`);return r},default:Ee},tr=e=>{let{retryStrategy:t}=e,r=Q(e.maxAttempts??Ee);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await Q(e.retryMode)()===j.ADAPTIVE?new Jt(r):new ge(r))}},Hd="AWS_RETRY_MODE",zd="retry_mode",rr={environmentVariableSelector:e=>e[Hd],configFileSelector:e=>e[zd],default:Oe};var ce=class{trace(){}debug(){}info(){}warn(){}error(){}};var ye=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let o of t)r.push(o);return r},de=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Pe=()=>{let e=[],t=[],r=!1,o=new Set,n=l=>l.sort((u,m)=>vi[m.step]-vi[u.step]||Ni[m.priority||"normal"]-Ni[u.priority||"normal"]),s=l=>{let u=!1,m=h=>{let E=ye(h.name,h.aliases);if(E.includes(l)){u=!0;for(let x of E)o.delete(x);return!1}return!0};return e=e.filter(m),t=t.filter(m),u},i=l=>{let u=!1,m=h=>{if(h.middleware===l){u=!0;for(let E of ye(h.name,h.aliases))o.delete(E);return!1}return!0};return e=e.filter(m),t=t.filter(m),u},a=l=>{var u;return e.forEach(m=>{l.add(m.middleware,{...m})}),t.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),(u=l.identifyOnResolve)==null||u.call(l,f.identifyOnResolve()),l},c=l=>{let u=[];return l.before.forEach(m=>{m.before.length===0&&m.after.length===0?u.push(m):u.push(...c(m))}),u.push(l),l.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?u.push(m):u.push(...c(m))}),u},p=(l=!1)=>{let u=[],m=[],h={};return e.forEach(x=>{let y={...x,before:[],after:[]};for(let w of ye(y.name,y.aliases))h[w]=y;u.push(y)}),t.forEach(x=>{let y={...x,before:[],after:[]};for(let w of ye(y.name,y.aliases))h[w]=y;m.push(y)}),m.forEach(x=>{if(x.toMiddleware){let y=h[x.toMiddleware];if(y===void 0){if(l)return;throw new Error(`${x.toMiddleware} is not found when adding ${de(x.name,x.aliases)} middleware ${x.relation} ${x.toMiddleware}`)}x.relation==="after"&&y.after.push(x),x.relation==="before"&&y.before.push(x)}}),n(u).map(c).reduce((x,y)=>(x.push(...y),x),[])},f={add:(l,u={})=>{let{name:m,override:h,aliases:E}=u,x={step:"initialize",priority:"normal",middleware:l,...u},y=ye(m,E);if(y.length>0){if(y.some(w=>o.has(w))){if(!h)throw new Error(`Duplicate middleware name '${de(m,E)}'`);for(let w of y){let G=e.findIndex(Ye=>{var Ke;return Ye.name===w||((Ke=Ye.aliases)==null?void 0:Ke.some(Lr=>Lr===w))});if(G===-1)continue;let P=e[G];if(P.step!==x.step||x.priority!==P.priority)throw new Error(`"${de(P.name,P.aliases)}" middleware with ${P.priority} priority in ${P.step} step cannot be overridden by "${de(m,E)}" middleware with ${x.priority} priority in ${x.step} step.`);e.splice(G,1)}}for(let w of y)o.add(w)}e.push(x)},addRelativeTo:(l,u)=>{let{name:m,override:h,aliases:E}=u,x={middleware:l,...u},y=ye(m,E);if(y.length>0){if(y.some(w=>o.has(w))){if(!h)throw new Error(`Duplicate middleware name '${de(m,E)}'`);for(let w of y){let G=t.findIndex(Ye=>{var Ke;return Ye.name===w||((Ke=Ye.aliases)==null?void 0:Ke.some(Lr=>Lr===w))});if(G===-1)continue;let P=t[G];if(P.toMiddleware!==x.toMiddleware||P.relation!==x.relation)throw new Error(`"${de(P.name,P.aliases)}" middleware ${P.relation} "${P.toMiddleware}" middleware cannot be overridden by "${de(m,E)}" middleware ${x.relation} "${x.toMiddleware}" middleware.`);t.splice(G,1)}}for(let w of y)o.add(w)}t.push(x)},clone:()=>a(Pe()),use:l=>{l.applyToStack(f)},remove:l=>typeof l=="string"?s(l):i(l),removeByTag:l=>{let u=!1,m=h=>{let{tags:E,name:x,aliases:y}=h;if(E&&E.includes(l)){let w=ye(x,y);for(let G of w)o.delete(G);return u=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),u},concat:l=>{var m;let u=a(Pe());return u.use(l),u.identifyOnResolve(r||u.identifyOnResolve()||(((m=l.identifyOnResolve)==null?void 0:m.call(l))??!1)),u},applyToStack:a,identify:()=>p(!0).map(l=>{let u=l.step??l.relation+" "+l.toMiddleware;return de(l.name,l.aliases)+" - "+u}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,u)=>{for(let m of p().map(h=>h.middleware).reverse())l=m(l,u);return r&&console.log(f.identify()),l}};return f},vi={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Ni={high:3,normal:2,low:1};var De=class{constructor(t){this.middlewareStack=Pe(),this.config=t}send(t,r,o){let n=typeof r!="function"?r:void 0,s=typeof r=="function"?r:o,i=t.resolveMiddleware(this.middlewareStack,this.config,n);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var Pi=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var or=require("buffer"),pe=(e,t=0,r=e.byteLength-t)=>{if(!Pi(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return or.Buffer.from(e,t,r)},Me=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?or.Buffer.from(e,t):or.Buffer.from(e)};var qd=/^[A-Za-z0-9+/]*={0,2}$/,ke=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!qd.exec(e))throw new TypeError("Invalid base64 string.");let t=Me(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var Fe=e=>pe(e.buffer,e.byteOffset,e.byteLength).toString("base64");var le=e=>{let t=Me(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Di=e=>typeof e=="string"?le(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var $e=e=>pe(e.buffer,e.byteOffset,e.byteLength).toString("utf8");function Mi(e,t="utf-8"){return t==="base64"?Fe(e):$e(e)}function ki(e,t){return t==="base64"?Z.mutate(ke(e)):Z.mutate(le(e))}var Z=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return ki(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return Mi(this,t)}};var Bd=require("@smithy/node-http-handler");var nr=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Z.mutate(e);if(!e)return Z.mutate(new Uint8Array);let r=t.streamCollector(e);return Z.mutate(await r)};v();var V=class{constructor(){this.middlewareStack=Pe()}static classBuilder(){return new lo}resolveMiddlewareWithContext(t,r,o,{middlewareFn:n,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:p,additionalContext:f,CommandCtor:l}){for(let x of n.bind(this)(l,t,r,o))this.middlewareStack.use(x);let u=t.concat(this.middlewareStack),{logger:m}=r,h={logger:m,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[F]:{...p},...f},{requestHandler:E}=r;return u.resolve(x=>E.handle(x.request,o||{}),h)}},lo=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,o={}){return this._smithyContext={service:t,operation:r,...o},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=o=>o,r=o=>o){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){let t=this,r;return r=class extends V{static getEndpointParameterInstructions(){return t._ep}constructor(o){super(),this.input=o,this.serialize=t._serializer,this.deserialize=t._deserializer,t._init(this)}resolveMiddleware(o,n,s){return this.resolveMiddlewareWithContext(o,n,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}};var sr="***SensitiveInformation***";var Fi=(e,t)=>{for(let r of Object.keys(e)){let o=e[r],n=async function(i,a,c){let p=new o(i);if(typeof a=="function")this.send(p,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(p,a||{},c)}else return this.send(p,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=n}};var Yw=Math.ceil(34028234663852886e22);var ir=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var ar=e=>Gd(e,32);var Gd=(e,t)=>{let r=ir(e);if(r!==void 0&&jd(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},jd=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},me=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Ue=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},g=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Wd.warn(Vd(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Vd=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Wd={warn:console.warn};var t_=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var r_=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/);var o_=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),n_=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),s_=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var i_=50*365*24*60*60*1e3;var Le=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},A=(e,t={})=>{Object.entries(t).filter(([,o])=>o!==void 0).forEach(([o,n])=>{(e[o]==null||e[o]==="")&&(e[o]=n)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var Yd=({output:e,parsedBody:t,exceptionCtor:r,errorCode:o})=>{let n=Kd(e),s=n.httpStatusCode?n.httpStatusCode+"":void 0,i=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||o||s||"UnknownError",$fault:"client",$metadata:n});throw A(i,t)},cr=e=>({output:t,parsedBody:r,errorCode:o})=>{Yd({output:t,parsedBody:r,exceptionCtor:e,errorCode:o})},Kd=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var dr=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var $i=!1,pr=e=>{e&&!$i&&parseInt(e.substring(1,e.indexOf(".")))<14&&($i=!0)};v();var Ui=e=>{let t=[];for(let r in Te){let o=Te[r];e[o]!==void 0&&t.push({algorithmId:()=>o,checksumConstructor:()=>e[o]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},Li=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var Hi=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},zi=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var lr=e=>({...Ui(e),...Hi(e)});var mr=e=>({...Li(e),...zi(e)});function mo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var uo=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};uo.prototype=Object.create(String.prototype,{constructor:{value:uo,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(uo,String);function R(e,t,r){let o,n,s;if(typeof t>"u"&&typeof r>"u")o={},s=e;else{if(o=e,typeof t=="function")return n=t,s=r,Xd(o,n,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){o[i]=s[i];continue}qi(o,null,s,i)}return o}var T=(e,t)=>{let r={};for(let o in t)qi(r,e,t,o);return r},Xd=(e,t,r)=>R(e,Object.entries(r).reduce((o,[n,s])=>(Array.isArray(s)?o[n]=s:typeof s=="function"?o[n]=[t,s()]:o[n]=[t,s],o),{})),qi=(e,t,r,o)=>{if(t!==null){let i=r[o];typeof i=="function"&&(i=[,i]);let[a=Jd,c=Qd,p=o]=i;(typeof a=="function"&&a(t[p])||typeof a!="function"&&a)&&(e[o]=c(t[p]));return}let[n,s]=r[o];if(typeof s=="function"){let i,a=n===void 0&&(i=s())!=null,c=typeof n=="function"&&!!n(void 0)||typeof n!="function"&&!!n;a?e[o]=i:c&&(e[o]=s())}else{let i=n===void 0&&s!=null,a=typeof n=="function"&&!!n(s)||typeof n!="function"&&!!n;(i||a)&&(e[o]=s)}},Jd=e=>e!=null,Qd=e=>e;var Bi=(e,t,r,o,n,s)=>{if(t!=null&&t[r]!==void 0){let i=o();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(n,s?i.split("/").map(a=>mo(a)).join("/"):mo(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};var Se=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(Se);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Se(e[r]));return t}return e};var Gi=require("stream"),ji=e=>(e==null?void 0:e.body)instanceof Gi.Readable||typeof ReadableStream<"u"&&(e==null?void 0:e.body)instanceof ReadableStream;var Zd=e=>(t,r)=>async o=>{var i;let n=await e.retryStrategy(),s=await e.maxAttempts();if(ep(n)){n=n;let a=await n.acquireInitialRetryToken(r.partition_id),c=new Error,p=0,f=0,{request:l}=o,u=C.isInstance(l);for(u&&(l.headers[Yt]=co());;)try{u&&(l.headers[Kt]=`attempt=${p+1}; max=${s}`);let{response:m,output:h}=await t(o);return n.recordSuccess(a),h.$metadata.attempts=p+1,h.$metadata.totalRetryDelay=f,{response:m,output:h}}catch(m){let h=tp(m);if(c=po(m),u&&ji(l))throw(i=r.logger instanceof ce?console:r.logger)==null||i.warn("An error was encountered in a non-retryable streaming request."),c;try{a=await n.refreshRetryTokenForRetry(a,h)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=p+1,c.$metadata.totalRetryDelay=f,c}p=a.getRetryCount();let E=a.getRetryDelay();f+=E,await new Promise(x=>setTimeout(x,E))}}else return n=n,n!=null&&n.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(t,o)},ep=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",tp=e=>{let t={errorType:rp(e)},r=op(e.$response);return r&&(t.retryAfterHint=r),t},rp=e=>ve(e)?"THROTTLING":Wt(e)?"TRANSIENT":gi(e)?"SERVER_ERROR":"CLIENT_ERROR",fo={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ur=e=>({applyToStack:t=>{t.add(Zd(e),fo)}}),op=e=>{if(!et.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],o=Number(r);return Number.isNaN(o)?new Date(r):new Date(o*1e3)};var Vi=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Wi={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Yi={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.485.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/core":"3.485.0","@aws-sdk/middleware-host-header":"3.485.0","@aws-sdk/middleware-logger":"3.485.0","@aws-sdk/middleware-recursion-detection":"3.485.0","@aws-sdk/middleware-user-agent":"3.485.0","@aws-sdk/region-config-resolver":"3.485.0","@aws-sdk/types":"3.485.0","@aws-sdk/util-endpoints":"3.485.0","@aws-sdk/util-user-agent-browser":"3.485.0","@aws-sdk/util-user-agent-node":"3.485.0","@smithy/config-resolver":"^2.0.23","@smithy/core":"^1.2.2","@smithy/fetch-http-handler":"^2.3.2","@smithy/hash-node":"^2.0.18","@smithy/invalid-dependency":"^2.0.16","@smithy/middleware-content-length":"^2.0.18","@smithy/middleware-endpoint":"^2.3.0","@smithy/middleware-retry":"^2.0.26","@smithy/middleware-serde":"^2.0.16","@smithy/middleware-stack":"^2.0.10","@smithy/node-config-provider":"^2.1.9","@smithy/node-http-handler":"^2.2.2","@smithy/protocol-http":"^3.0.12","@smithy/smithy-client":"^2.2.1","@smithy/types":"^2.8.0","@smithy/url-parser":"^2.0.16","@smithy/util-base64":"^2.0.1","@smithy/util-body-length-browser":"^2.0.1","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.24","@smithy/util-defaults-mode-node":"^2.0.32","@smithy/util-endpoints":"^1.0.8","@smithy/util-retry":"^2.0.9","@smithy/util-utf8":"^2.0.2",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var Ki=!1,Xi=e=>{e&&!Ki&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Ki=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 14.x on May 1, 2024.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to an active Node.js LTS version.

More information can be found at: https://a.co/dzr2AJd`))};v();var CR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:no.name};var vR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:it.name};v();var GR={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:fo.name};v();var ip=e=>t=>ap(t)&&t.expiration.getTime()-Date.now()<e;var nT=ip(3e5),ap=e=>e.expiration!==void 0;v();function Ji(e,t){return new ho(e,t)}var ho=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:o,path:n}=await this.context.endpoint();this.path=n;for(let s of this.resolvePathStack)s(this.path);return new C({protocol:r,hostname:this.hostname||t,port:o,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,o,n){return this.resolvePathStack.push(s=>{this.path=Bi(s,this.input,t,r,o,n)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}};se();var fr=require("os"),ct=require("process");var xo={isCrtAvailable:!1};var Qi=()=>xo.isCrtAvailable?["md/crt-avail"]:null;var cp="AWS_SDK_UA_APP_ID",dp="sdk-ua-app-id",hr=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,fr.platform)()}`,(0,fr.release)()],["lang/js"],["md/nodejs",`${ct.versions.node}`]],o=Qi();o&&r.push(o),e&&r.push([`api/${e}`,t]),ct.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${ct.env.AWS_EXECUTION_ENV}`]);let n=I({environmentVariableSelector:i=>i[cp],configFileSelector:i=>i[dp],default:void 0})(),s;return async()=>{if(!s){let i=await n;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var ea=require("buffer"),xr=require("crypto"),He=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(Di(Zi(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,xr.createHmac)(this.algorithmIdentifier,Zi(this.secret)):(0,xr.createHash)(this.algorithmIdentifier)}};function Zi(e,t){return ea.Buffer.isBuffer(e)?e:typeof e=="string"?Me(e,t):ArrayBuffer.isView(e)?pe(e.buffer,e.byteOffset,e.byteLength):pe(e)}se();var br=require("@smithy/node-http-handler");var Er=require("fs"),gr=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Er.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Er.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};st();var pa="required",H="fn",z="argv",Be="ref";var ta="isSet",dt="booleanEquals",ze="error",qe="endpoint",ee="tree",Eo="PartitionResult",go="getAttr",ra={[pa]:!1,type:"String"},oa={[pa]:!0,default:!1,type:"Boolean"},na={[Be]:"Endpoint"},la={[H]:dt,[z]:[{[Be]:"UseFIPS"},!0]},ma={[H]:dt,[z]:[{[Be]:"UseDualStack"},!0]},L={},sa={[H]:go,[z]:[{[Be]:Eo},"supportsFIPS"]},ua={[Be]:Eo},ia={[H]:dt,[z]:[!0,{[H]:go,[z]:[ua,"supportsDualStack"]}]},aa=[la],ca=[ma],da=[{[Be]:"Region"}],pp={version:"1.0",parameters:{Region:ra,UseDualStack:oa,UseFIPS:oa,Endpoint:ra},rules:[{conditions:[{[H]:ta,[z]:[na]}],rules:[{conditions:aa,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ze},{conditions:ca,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ze},{endpoint:{url:na,properties:L,headers:L},type:qe}],type:ee},{conditions:[{[H]:ta,[z]:da}],rules:[{conditions:[{[H]:"aws.partition",[z]:da,assign:Eo}],rules:[{conditions:[la,ma],rules:[{conditions:[{[H]:dt,[z]:[!0,sa]},ia],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:L,headers:L},type:qe}],type:ee},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ze}],type:ee},{conditions:aa,rules:[{conditions:[{[H]:dt,[z]:[sa,!0]}],rules:[{conditions:[{[H]:"stringEquals",[z]:[{[H]:go,[z]:[ua,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:L,headers:L},type:qe},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:L,headers:L},type:qe}],type:ee},{error:"FIPS is enabled but this partition does not support FIPS",type:ze}],type:ee},{conditions:ca,rules:[{conditions:[ia],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:L,headers:L},type:qe}],type:ee},{error:"DualStack is enabled but this partition does not support DualStack",type:ze}],type:ee},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:L,headers:L},type:qe}],type:ee}],type:ee},{error:"Invalid Configuration: Missing Region",type:ze}]},fa=pp;var ha=(e,t={})=>nt(fa,{endpointParams:e,logger:t.logger});var xa=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??ke,base64Encoder:(e==null?void 0:e.base64Encoder)??Fe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??ha,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new ce,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??K,utf8Decoder:(e==null?void 0:e.utf8Decoder)??le,utf8Encoder:(e==null?void 0:e.utf8Encoder)??$e});se();O();var Ea="AWS_EXECUTION_ENV",yo="AWS_REGION",So="AWS_DEFAULT_REGION",ga="AWS_EC2_METADATA_DISABLED",ya=["in-region","cross-region","mobile","standard","legacy"],Sa="/latest/meta-data/placement/region";var lp="AWS_DEFAULTS_MODE",mp="defaults_mode",wa={environmentVariableSelector:e=>e[lp],configFileSelector:e=>e[mp],default:"legacy"};var Ar=({region:e=I(be),defaultsMode:t=I(wa)}={})=>Et(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return Pp(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ya.join(", ")}, got ${r}`)}}),Pp=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await Dp();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},Dp=async()=>{if(process.env[Ea]&&(process.env[yo]||process.env[So]))return process.env[yo]??process.env[So];if(!process.env[ga])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>(za(),Ha)),r=await e();return(await t({...r,path:Sa})).toString()}catch{}};var qa=e=>{pr(process.version);let t=Ar(e),r=()=>t().then(dr),o=xa(e);return Xi(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??gr,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??hr({serviceId:o.serviceId,clientVersion:Yi.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(er),region:(e==null?void 0:e.region)??I(be,zt),requestHandler:(e==null?void 0:e.requestHandler)??new br.NodeHttpHandler(r),retryMode:(e==null?void 0:e.retryMode)??I({...rr,default:async()=>(await r()).retryMode||Oe}),sha256:(e==null?void 0:e.sha256)??He.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??br.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(Ut),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(Lt)}};var Or=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},vr=e=>({region:e.region()});var bo=e=>e,Ba=(e,t)=>{let r={...bo(Or(e)),...bo(lr(e)),...bo(Tt(e))};return t.forEach(o=>o.configure(r)),{...e,...vr(r),...mr(r),...It(r)}};var Nr=class extends De{constructor(...[t]){let r=qa(t||{}),o=Vi(r),n=Bt(o),s=Vt(n),i=tr(s),a=i,c=Ot(a),p=Ba(c,(t==null?void 0:t.extensions)||[]);super(p),this.config=p,this.middlewareStack.use(ur(this.config)),this.middlewareStack.use(Gt(this.config)),this.middlewareStack.use(Ct(this.config)),this.middlewareStack.use(At(this.config)),this.middlewareStack.use(bt(this.config)),this.middlewareStack.use($t(this.config))}destroy(){super.destroy()}};var te=class e extends Le{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Pr=class e extends te{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Dr=class e extends te{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Mr=class e extends te{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},kr=class e extends te{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ga=e=>({...e,...e.accessToken&&{accessToken:sr}}),Fp=e=>({...e,...e.secretAccessKey&&{secretAccessKey:sr},...e.sessionToken&&{sessionToken:sr}}),ja=e=>({...e,...e.roleCredentials&&{roleCredentials:Fp(e.roleCredentials)}});var Va=async(e,t)=>{let r=Ji(e,t),o=R({},Gp,{[Xp]:e[Vp]});r.bp("/federation/credentials");let n=R({[Kp]:[,me(e[Yp],"roleName")],[Wp]:[,me(e[jp],"accountId")]});return r.m("GET").h(o).q(n).b(void 0),r.build()};var Wa=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return $p(e,t);let r=R({$metadata:ut(e)}),o=me(Ue(await Ya(e.body,t)),"body"),n=T(o,{roleCredentials:Se});return Object.assign(r,n),r},$p=async(e,t)=>{let r={...e,body:await Jp(e.body,t)},o=Qp(e,r.body);switch(o){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Lp(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Hp(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await zp(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await qp(r,t);default:let n=r.body;return Up({output:e,parsedBody:n,errorCode:o})}};var Up=cr(te),Lp=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{message:g});Object.assign(r,n);let s=new Pr({$metadata:ut(e),...r});return A(s,e.body)},Hp=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{message:g});Object.assign(r,n);let s=new Dr({$metadata:ut(e),...r});return A(s,e.body)},zp=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{message:g});Object.assign(r,n);let s=new Mr({$metadata:ut(e),...r});return A(s,e.body)},qp=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{message:g});Object.assign(r,n);let s=new kr({$metadata:ut(e),...r});return A(s,e.body)},ut=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Bp=(e,t)=>nr(e,t).then(r=>t.utf8Encoder(r)),Gp=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),jp="accountId",Vp="accessToken",Wp="account_id";var Yp="roleName",Kp="role_name",Xp="x-amz-sso_bearer_token",Ya=(e,t)=>Bp(e,t).then(r=>r.length?JSON.parse(r):{}),Jp=async(e,t)=>{let r=await Ya(e,t);return r.message=r.message??r.Message,r},Qp=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),o=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)};var Fr=class extends V.classBuilder().ep({...Wi}).m(function(t,r,o,n){return[ie(o,this.serialize,this.deserialize),ae(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Ga,ja).ser(Va).de(Wa).build(){};se();var $r=require("@smithy/node-http-handler");st();v();v();v();var Zp=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),el={version:"3.429.0"},nc="required",W="fn",Y="argv",Ve="ref",Ka="isSet",re="tree",Ge="error",je="endpoint",Po="PartitionResult",Do="getAttr",Xa={[nc]:!1,type:"String"},Ja={[nc]:!0,default:!1,type:"Boolean"},Qa={[Ve]:"Endpoint"},sc={[W]:"booleanEquals",[Y]:[{[Ve]:"UseFIPS"},!0]},ic={[W]:"booleanEquals",[Y]:[{[Ve]:"UseDualStack"},!0]},q={},Za={[W]:"booleanEquals",[Y]:[!0,{[W]:Do,[Y]:[{[Ve]:Po},"supportsFIPS"]}]},ac={[Ve]:Po},ec={[W]:"booleanEquals",[Y]:[!0,{[W]:Do,[Y]:[ac,"supportsDualStack"]}]},tc=[sc],rc=[ic],oc=[{[Ve]:"Region"}],tl={version:"1.0",parameters:{Region:Xa,UseDualStack:Ja,UseFIPS:Ja,Endpoint:Xa},rules:[{conditions:[{[W]:Ka,[Y]:[Qa]}],type:re,rules:[{conditions:tc,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ge},{conditions:rc,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ge},{endpoint:{url:Qa,properties:q,headers:q},type:je}]},{conditions:[{[W]:Ka,[Y]:oc}],type:re,rules:[{conditions:[{[W]:"aws.partition",[Y]:oc,assign:Po}],type:re,rules:[{conditions:[sc,ic],type:re,rules:[{conditions:[Za,ec],type:re,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:q,headers:q},type:je}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ge}]},{conditions:tc,type:re,rules:[{conditions:[Za],type:re,rules:[{conditions:[{[W]:"stringEquals",[Y]:["aws-us-gov",{[W]:Do,[Y]:[ac,"name"]}]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:q,headers:q},type:je},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:q,headers:q},type:je}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ge}]},{conditions:rc,type:re,rules:[{conditions:[ec],type:re,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:q,headers:q},type:je}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ge}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:q,headers:q},type:je}]}]},{error:"Invalid Configuration: Missing Region",type:Ge}]},rl=tl,ol=(e,t={})=>nt(rl,{endpointParams:e,logger:t.logger}),nl=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??ke,base64Encoder:(e==null?void 0:e.base64Encoder)??Fe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??ol,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new ce,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??K,utf8Decoder:(e==null?void 0:e.utf8Decoder)??le,utf8Encoder:(e==null?void 0:e.utf8Encoder)??$e}),sl=e=>{pr(process.version);let t=Ar(e),r=()=>t().then(dr),o=nl(e);return{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??gr,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??hr({serviceId:o.serviceId,clientVersion:el.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(er),region:(e==null?void 0:e.region)??I(be,zt),requestHandler:(e==null?void 0:e.requestHandler)??new $r.NodeHttpHandler(r),retryMode:(e==null?void 0:e.retryMode)??I({...rr,default:async()=>(await r()).retryMode||Oe}),sha256:(e==null?void 0:e.sha256)??He.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??$r.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(Ut),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(Lt)}},Oo=e=>e,il=(e,t)=>{let r={...Oo(Or(e)),...Oo(lr(e)),...Oo(Tt(e))};return t.forEach(o=>o.configure(r)),{...e,...vr(r),...mr(r),...It(r)}},Mo=class extends De{constructor(...[e]){let t=sl(e||{}),r=Zp(t),o=Bt(r),n=Vt(o),s=tr(n),i=s,a=Ot(i),c=il(a,(e==null?void 0:e.extensions)||[]);super(c),this.config=c,this.middlewareStack.use(ur(this.config)),this.middlewareStack.use(Gt(this.config)),this.middlewareStack.use(Ct(this.config)),this.middlewareStack.use(At(this.config)),this.middlewareStack.use(bt(this.config)),this.middlewareStack.use($t(this.config))}destroy(){super.destroy()}},D=class cc extends Le{constructor(t){super(t),Object.setPrototypeOf(this,cc.prototype)}},al=class dc extends D{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,dc.prototype),this.error=t.error,this.error_description=t.error_description}},cl=class pc extends D{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,pc.prototype),this.error=t.error,this.error_description=t.error_description}},dl=class lc extends D{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,lc.prototype),this.error=t.error,this.error_description=t.error_description}},pl=class mc extends D{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,mc.prototype),this.error=t.error,this.error_description=t.error_description}},ll=class uc extends D{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,uc.prototype),this.error=t.error,this.error_description=t.error_description}},ml=class fc extends D{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,fc.prototype),this.error=t.error,this.error_description=t.error_description}},ul=class hc extends D{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,hc.prototype),this.error=t.error,this.error_description=t.error_description}},fl=class xc extends D{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,xc.prototype),this.error=t.error,this.error_description=t.error_description}},hl=class Ec extends D{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Ec.prototype),this.error=t.error,this.error_description=t.error_description}},xl=class gc extends D{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,gc.prototype),this.error=t.error,this.error_description=t.error_description}},El=class yc extends D{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,yc.prototype),this.error=t.error,this.error_description=t.error_description}},gl=class Sc extends D{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,Sc.prototype),this.error=t.error,this.error_description=t.error_description}},yl=async(e,t)=>{let{hostname:r,protocol:o="https",port:n,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(T(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:p=>Se(p)})),new C({protocol:o,hostname:r,port:n,method:"POST",headers:i,path:a,body:c})},Sl=async(e,t)=>{let{hostname:r,protocol:o="https",port:n,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/client/register`,c;return c=JSON.stringify(T(e,{clientName:[],clientType:[],scopes:p=>Se(p)})),new C({protocol:o,hostname:r,port:n,method:"POST",headers:i,path:a,body:c})},wl=async(e,t)=>{let{hostname:r,protocol:o="https",port:n,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,c;return c=JSON.stringify(T(e,{clientId:[],clientSecret:[],startUrl:[]})),new C({protocol:o,hostname:r,port:n,method:"POST",headers:i,path:a,body:c})},_l=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Rl(e,t);let r=R({$metadata:N(e)}),o=me(Ue(await Ur(e.body,t)),"body"),n=T(o,{accessToken:g,expiresIn:ar,idToken:g,refreshToken:g,tokenType:g});return Object.assign(r,n),r},Rl=async(e,t)=>{let r={...e,body:await Uo(e.body,t)},o=Lo(e,r.body);switch(o){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await bl(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Ol(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await vl(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Fo(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await wc(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await Pl(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await $o(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await _c(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Rc(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Tc(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await Dl(r,t);default:let n=r.body;return ko({output:e,parsedBody:n,errorCode:o})}},Tl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Il(e,t);let r=R({$metadata:N(e)}),o=me(Ue(await Ur(e.body,t)),"body"),n=T(o,{authorizationEndpoint:g,clientId:g,clientIdIssuedAt:ir,clientSecret:g,clientSecretExpiresAt:ir,tokenEndpoint:g});return Object.assign(r,n),r},Il=async(e,t)=>{let r={...e,body:await Uo(e.body,t)},o=Lo(e,r.body);switch(o){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Fo(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await Nl(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await $o(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await _c(r,t);default:let n=r.body;return ko({output:e,parsedBody:n,errorCode:o})}},Cl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Al(e,t);let r=R({$metadata:N(e)}),o=me(Ue(await Ur(e.body,t)),"body"),n=T(o,{deviceCode:g,expiresIn:ar,interval:ar,userCode:g,verificationUri:g,verificationUriComplete:g});return Object.assign(r,n),r},Al=async(e,t)=>{let r={...e,body:await Uo(e.body,t)},o=Lo(e,r.body);switch(o){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Fo(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await wc(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await $o(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Rc(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Tc(r,t);default:let n=r.body;return ko({output:e,parsedBody:n,errorCode:o})}},ko=cr(D),bl=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new al({$metadata:N(e),...r});return A(s,e.body)},Ol=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new cl({$metadata:N(e),...r});return A(s,e.body)},vl=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new dl({$metadata:N(e),...r});return A(s,e.body)},Fo=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new pl({$metadata:N(e),...r});return A(s,e.body)},wc=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new ll({$metadata:N(e),...r});return A(s,e.body)},Nl=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new gl({$metadata:N(e),...r});return A(s,e.body)},Pl=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new ml({$metadata:N(e),...r});return A(s,e.body)},$o=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new ul({$metadata:N(e),...r});return A(s,e.body)},_c=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new fl({$metadata:N(e),...r});return A(s,e.body)},Rc=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new hl({$metadata:N(e),...r});return A(s,e.body)},Tc=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new xl({$metadata:N(e),...r});return A(s,e.body)},Dl=async(e,t)=>{let r=R({}),o=e.body,n=T(o,{error:g,error_description:g});Object.assign(r,n);let s=new El({$metadata:N(e),...r});return A(s,e.body)},N=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ml=(e,t)=>nr(e,t).then(r=>t.utf8Encoder(r)),Ur=(e,t)=>Ml(e,t).then(r=>r.length?JSON.parse(r):{}),Uo=async(e,t)=>{let r=await Ur(e,t);return r.message=r.message??r.Message,r},Lo=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),o=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)},ft=class extends V{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,o){this.middlewareStack.use(ie(r,this.serialize,this.deserialize)),this.middlewareStack.use(ae(r,_CreateTokenCommand.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f,[F]:{service:"AWSSSOOIDCService",operation:"CreateToken"}},{requestHandler:p}=r;return n.resolve(f=>p.handle(f.request,o||{}),c)}serialize(t,r){return yl(t,r)}deserialize(t,r){return _l(t,r)}},vo=class extends V{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,o){this.middlewareStack.use(ie(r,this.serialize,this.deserialize)),this.middlewareStack.use(ae(r,_RegisterClientCommand.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f,[F]:{service:"AWSSSOOIDCService",operation:"RegisterClient"}},{requestHandler:p}=r;return n.resolve(f=>p.handle(f.request,o||{}),c)}serialize(t,r){return Sl(t,r)}deserialize(t,r){return Tl(t,r)}},No=class extends V{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,o){this.middlewareStack.use(ie(r,this.serialize,this.deserialize)),this.middlewareStack.use(ae(r,_StartDeviceAuthorizationCommand.getEndpointParameterInstructions()));let n=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:f=>f,outputFilterSensitiveLog:f=>f,[F]:{service:"AWSSSOOIDCService",operation:"StartDeviceAuthorization"}},{requestHandler:p}=r;return n.resolve(f=>p.handle(f.request,o||{}),c)}serialize(t,r){return wl(t,r)}deserialize(t,r){return Cl(t,r)}},kl={CreateTokenCommand:ft,RegisterClientCommand:vo,StartDeviceAuthorizationCommand:No},Fl=class extends Mo{};Fi(kl,Fl);O();xe();var We="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var Ho={},Ic=e=>{if(Ho[e])return Ho[e];let t=new Mo({region:e});return Ho[e]=t,t};var Cc=(e,t)=>Ic(t).send(new ft({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));O();var zo=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new k(`Token is expired. ${We}`,!1)};O();var he=(e,t,r=!1)=>{if(typeof t>"u")throw new k(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${We}`,!1)};xe();var Ac=require("fs"),{writeFile:$l}=Ac.promises,bc=(e,t)=>{let r=gt(e),o=JSON.stringify(t,null,2);return $l(r,o)};var Oc=new Date(0),vc=(e={})=>async()=>{let t=await Rt(e),r=_e(e),o=t[r];if(o){if(!o.sso_session)throw new k(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new k(`Profile '${r}' could not be found in shared credentials file.`,!1);let n=o.sso_session,i=(await _t(e))[n];if(!i)throw new k(`Sso session '${n}' could not be found in shared credentials file.`,!1);for(let m of["sso_start_url","sso_region"])if(!i[m])throw new k(`Sso session '${n}' is missing required property '${m}'.`,!1);let a=i.sso_start_url,c=i.sso_region,p;try{p=await yt(n)}catch{throw new k(`The SSO session token associated with profile=${r} was not found or is invalid. ${We}`,!1)}he("accessToken",p.accessToken),he("expiresAt",p.expiresAt);let{accessToken:f,expiresAt:l}=p,u={token:f,expiration:new Date(l)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-Oc.getTime()<30*1e3)return zo(u),u;he("clientId",p.clientId,!0),he("clientSecret",p.clientSecret,!0),he("refreshToken",p.refreshToken,!0);try{Oc.setTime(Date.now());let m=await Cc(p,c);he("accessToken",m.accessToken),he("expiresIn",m.expiresIn);let h=new Date(Date.now()+m.expiresIn*1e3);try{await bc(n,{...p,accessToken:m.accessToken,expiresAt:h.toISOString(),refreshToken:m.refreshToken})}catch{}return{token:m.accessToken,expiration:h}}catch{return zo(u),u}};O();xe();var ht=!1,qo=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:s,profile:i})=>{var y;let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let w=await vc({profile:i})();a={accessToken:w.token,expiresAt:new Date(w.expiration).toISOString()}}catch(w){throw new S(w.message,ht)}else try{a=await yt(e)}catch{throw new S(`The SSO session associated with this profile is invalid. ${c}`,ht)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new S(`The SSO session associated with this profile has expired. ${c}`,ht);let{accessToken:p}=a,f=s||new Nr({region:o}),l;try{l=await f.send(new Fr({accountId:r,roleName:n,accessToken:p}))}catch(w){throw S.from(w,ht)}let{roleCredentials:{accessKeyId:u,secretAccessKey:m,sessionToken:h,expiration:E}={}}=l,x=(y=l==null?void 0:l.roleCredentials)==null?void 0:y.credentialScope;if(!u||!m||!h||!E)throw new S("SSO returns an invalid temporary credential.",ht);return{accessKeyId:u,secretAccessKey:m,sessionToken:h,expiration:new Date(E),credentialScope:x}};O();var Nc=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:o,sso_role_name:n}=e;if(!t||!r||!o||!n)throw new S(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var Pc=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:s,ssoSession:i}=e,a=_e(e);if(!t&&!r&&!o&&!n&&!i){let p=(await Rt(e))[a];if(!p)throw new S(`Profile ${a} was not found.`);if(!Ts(p))throw new S(`Profile ${a} is not configured with SSO credentials.`);if(p!=null&&p.sso_session){let x=(await _t(e))[p.sso_session],y=` configurations in profile ${a} and sso-session ${p.sso_session}`;if(o&&o!==x.sso_region)throw new S("Conflicting SSO region"+y,!1);if(t&&t!==x.sso_start_url)throw new S("Conflicting SSO start_url"+y,!1);p.sso_region=x.sso_region,p.sso_start_url=x.sso_start_url}let{sso_start_url:f,sso_account_id:l,sso_region:u,sso_role_name:m,sso_session:h}=Nc(p);return qo({ssoStartUrl:f,ssoSession:h,ssoAccountId:l,ssoRegion:u,ssoRoleName:m,ssoClient:s,profile:a})}else{if(!t||!r||!o||!n)throw new S('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return qo({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:s,profile:a})}};var Mc=require("@smithy/node-http-handler"),Ll=async e=>new Dc.DynamoDB({region:"eu-west-1",credentials:(e==null?void 0:e.credentials)||await Pc({profile:"prod"})(),maxAttempts:6,retryMode:"adaptive",requestHandler:new Mc.NodeHttpHandler({requestTimeout:1e8,connectionTimeout:2e4})}),kc=Ll;var Fc=Bo(require("fs"),1),$c=async(e,t)=>{await Fc.default.appendFile(e,t,r=>{console.error(r)})};var B=class e{static initialProgress=0;static progress=0;static startTime=new Date().getTime();static updateProgress(){let r=Math.round(30*(e.progress/100)),o=30-r,n="\u2588".repeat(r)+" ".repeat(o);console.clear(),console.log(`Progress: [${e.colorMessage(n,"\x1B[32m")}] ${e.progress}%`);let s=new Date().getTime(),i=Math.round((s-e.startTime)/1e3),a=i*100/(e.progress-e.initialProgress)||0,c=Math.max(a-i,0);console.log(`Estimated remaining time: ${e.formatTime(c)}`)}static formatTime(t){let r=Math.floor(t/3600),o=Math.floor(t%3600/60),n=r.toString().padStart(2,"0"),s=o.toString().padStart(2,"0"),i=Math.floor(t%60).toString().padStart(2,"0");return`${n}:${s}:${i}`}static Progress(){let r=setInterval(()=>{e.updateProgress(),e.progress>=100&&(clearInterval(r),console.log("Progress complete!"))},1e3)}static colorMessage(t,r){return`${r}${t}\x1B[0m`}static logBeforeExit(t){let r=()=>{console.clear(),t(),process.exit(0)};process.on("beforeExit",r),process.on("SIGINT",r)}};var xt=class{client;totalSegments;batchSize;batchIdx;totalRecords=0;progress=0;callbackQueue=[];constructor(t){this.client=t.client,this.totalSegments=t.totalSegments||1e6,this.batchSize=t.batchSize||1e3,this.batchIdx=t.startSegment||0}increment(){this.batchIdx+=this.batchSize,this.progress=parseFloat((this.batchIdx/this.totalSegments*100).toFixed(2))}async runCb(t,r){this.callbackQueue.push(!0),t(r).then(()=>{this.callbackQueue.shift()}).catch(()=>{console.error("Error in batch callback",r),this.callbackQueue.shift()})}async*scan(t){let r=o=>new Array(this.batchSize).fill(void 0).map((n,s)=>this.client.scan({...t.scanOptions,TotalSegments:1e6,Segment:s+o}));for(;this.batchIdx<this.totalSegments;){let o=r(this.batchIdx),n=await Promise.all(o);this.increment();let s={Count:0,Items:[]};for(let i of n)i.Count&&(s.Count+=i.Count??0,s.Items.push(...i.Items??[]));this.totalRecords+=s.Count,t.callback?this.runCb(t.callback,s):yield s}for(;t.callback&&this.callbackQueue.length>0;)await new Promise(o=>setTimeout(o,100))}logStats(){console.log(B.colorMessage("Scan Results:","\x1B[44m")+B.colorMessage(` Total Segments: ${this.totalSegments} | Batch Size: ${this.batchSize} | Current Batch: ${this.batchIdx} | Total Records: ${this.totalRecords} | Progress: ${(this.batchIdx/this.totalSegments*100).toFixed(2)}%`,"\x1B[41m"))}};var Hc=xt;var zl=async()=>{var t;B.Progress();let e=new Hc({client:await kc({}),startSegment:0,totalSegments:1e6,batchSize:500});B.initialProgress=e.batchIdx/e.totalSegments*100,B.logBeforeExit(e.logStats.bind(e));try{let r=e.scan({scanOptions:{TableName:process.env.TABLE,FilterExpression:"attribute_not_exists(#data)",ExpressionAttributeNames:{"#data":"data","#uuid":"uuid"},ProjectionExpression:"#uuid",Select:"SPECIFIC_ATTRIBUTES"}});for await(let o of r)B.progress=e.progress,$c("out/user_data_test.txt",(t=o.Items)==null?void 0:t.reduce((n,s)=>{var i,a;return(i=s==null?void 0:s.uuid)!=null&&i.S?n+`${(a=s.uuid)==null?void 0:a.S}\r
`:n},""))}catch(r){e.logStats(),console.error(r),process.exit(1)}};zl();
